---
title: Formulas veidotājs elektronisko pārskatu veidošanā (ER)
description: Šajā tēmā ir sniegta informācija pat to, kā izmantot formulu noformētāju elektronisko atskaišu (ER) veidošanā.
author: NickSelin
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2dcede0818630329a5608c2d294c9c9f4f749f13
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750136"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="1603c-103">Formulas veidotājs elektronisko pārskatu veidošanā (ER)</span><span class="sxs-lookup"><span data-stu-id="1603c-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="1603c-104">Šajā tēmā ir paskaidrots, kā elektronisko pārskatu veidošanā (Electronic reporting — ER) lietot formulas veidotāju.</span><span class="sxs-lookup"><span data-stu-id="1603c-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="1603c-105">Kad veidojat formātu noteiktam ER elektroniskajam dokumentam, datu pārveidošanai varat lietot formulas, lai nodrošinātu atbilstību dokumenta izpildes un formatējuma prasībām.</span><span class="sxs-lookup"><span data-stu-id="1603c-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="1603c-106">Šīs formulas līdzinās formulām programmā Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="1603c-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="1603c-107">Formulās tiek atbalstīti dažādi funkciju tipi — teksta, datuma un laika, matemātiskās, loģiskās, informācijas un datu tipu pārveidošanas un arī citas, biznesa jomai specifiskas, funkcijas.</span><span class="sxs-lookup"><span data-stu-id="1603c-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="1603c-108">Pārskats par formulas veidotāju</span><span class="sxs-lookup"><span data-stu-id="1603c-108">Formula designer overview</span></span>

<span data-ttu-id="1603c-109">ER atbalsta formulas veidotāju.</span><span class="sxs-lookup"><span data-stu-id="1603c-109">ER supports the formula designer.</span></span> <span data-ttu-id="1603c-110">Tāpēc veidošanas laikā varat konfigurēt izteiksmes, kuras var izmantot tālāk norādīto uzdevumu izpildes laikā.</span><span class="sxs-lookup"><span data-stu-id="1603c-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="1603c-111">To datu pārveidošana, kuri ir saņemti no programmas datu bāzes un ir jāievada ER datu modelī, kas ir paredzēts izmantošanai kā datu avots ER formātiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="1603c-112">(Šie pārveidojumi var iekļaut, piemēram, filtrēšanu, grupēšanu un datu tipa pārveidošanu.)</span><span class="sxs-lookup"><span data-stu-id="1603c-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="1603c-113">Datu formatēšana tādiem datiem, kas ir jāsūta uz ģenerēto elektronisko dokumentu saskaņā ar noteikta ER formāta izkārtojumu un nosacījumiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="1603c-114">(Formatēšanu var veikt, piemēram, saskaņā ar pieprasīto valodu, kultūru vai kodējumu.)</span><span class="sxs-lookup"><span data-stu-id="1603c-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="1603c-115">Elektronisko dokumentu izveides procesa kontrolēšana.</span><span class="sxs-lookup"><span data-stu-id="1603c-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="1603c-116">(Piemēram, izteiksmes var iespējot vai atspējot noteiktu formāta elementu izvadi atkarībā no datu apstrādes.</span><span class="sxs-lookup"><span data-stu-id="1603c-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="1603c-117">Tās var arī pārtraukt dokumenta izveides procesu vai sūtīt ziņojumus lietotājiem.)</span><span class="sxs-lookup"><span data-stu-id="1603c-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="1603c-118">Lapu **Formulas veidotājs** var atvērt, veicot kādu no tālāk norādītajām darbībām.</span><span class="sxs-lookup"><span data-stu-id="1603c-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="1603c-119">Datu avota elementus saistīt ar datu modeļa komponentiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="1603c-120">Datu avota elementus saistīt ar formāta komponentiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="1603c-121">Pabeigt uzturēšanu aprēķinātajiem laukiem, kas ir daļa no datu avotiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="1603c-122">Definēt redzamības nosacījumus lietotāja ievades parametriem.</span><span class="sxs-lookup"><span data-stu-id="1603c-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="1603c-123">Formatēt formāta transformācijas.</span><span class="sxs-lookup"><span data-stu-id="1603c-123">Design a format's transformations.</span></span>
- <span data-ttu-id="1603c-124">Definēt formāta komponentu iespējošanas nosacījumus.</span><span class="sxs-lookup"><span data-stu-id="1603c-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="1603c-125">Definēt failu nosaukumus formāta komponentiem FILE.</span><span class="sxs-lookup"><span data-stu-id="1603c-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="1603c-126">Definēt nosacījumus procesa kontroles pārbaudēm.</span><span class="sxs-lookup"><span data-stu-id="1603c-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="1603c-127">Definēt ziņojumu tekstu procesa kontroles pārbaudēm.</span><span class="sxs-lookup"><span data-stu-id="1603c-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="1603c-128">Datu saistīšana</span><span class="sxs-lookup"><span data-stu-id="1603c-128">Data binding</span></span>

<span data-ttu-id="1603c-129">ER formulas veidotāju var izmantot, lai definētu izteiksmi, kas pārveido no datu avotiem saņemtos datus, lai izpildes laikā šos datus varētu ievadīt datu patērētājā šādos veidos:</span><span class="sxs-lookup"><span data-stu-id="1603c-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="1603c-130">No programmas datu avotiem un izpildes laika parametriem uz ER datu modeli</span><span class="sxs-lookup"><span data-stu-id="1603c-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="1603c-131">No ER datu modeļa uz ER formātu</span><span class="sxs-lookup"><span data-stu-id="1603c-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="1603c-132">No programmas datu avotiem un izpildes laika parametriem uz ER formatu</span><span class="sxs-lookup"><span data-stu-id="1603c-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="1603c-133">Nākamajā attēlā ir parādīts šī tipa izteiksmes noformējums.</span><span class="sxs-lookup"><span data-stu-id="1603c-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="1603c-134">Šajā piemērā izteiksme noapaļo tabulas Intrastat lauka **Intrastat.AmountMST** vērtību līdz diviem cipariem aiz komata un pēc tam atgriež noapaļoto vērtību.</span><span class="sxs-lookup"><span data-stu-id="1603c-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="1603c-135">[![Datu saistīšanas izteiksme](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="1603c-136">Tālāk esošajā attēlā ir parādīts, kā var lietot šī tipa izteiksmi.</span><span class="sxs-lookup"><span data-stu-id="1603c-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="1603c-137">Šajā piemērā izveidotās izteiksmes rezultāts tiek ievadīts datu modeļa **Nodokļu pārskatu veidošanas modelis** komponentā **Transaction.InvoicedAmount**.</span><span class="sxs-lookup"><span data-stu-id="1603c-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="1603c-138">[![Tiek izmantota datu saistīšanas izteiksme](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="1603c-139">Izpildes laikā izveidotā formula `ROUND (Intrastat.AmountMST, 2)` katra tabulas Instrastat ieraksta lauka **AmountMST** vērtību noapaļo līdz diviem cipariem aiz komata.</span><span class="sxs-lookup"><span data-stu-id="1603c-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="1603c-140">Pēc tam tā noapaļoto vērtību ievada datu modeļa **Nodokļu pārskatu veidošana** komponentā **Transaction.InvoicedAmount**.</span><span class="sxs-lookup"><span data-stu-id="1603c-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="1603c-141">Datu formatēšana</span><span class="sxs-lookup"><span data-stu-id="1603c-141">Data formatting</span></span>

<span data-ttu-id="1603c-142">ER formulas veidotāju var izmantot, lai definētu izteiksmi, kas formatē no datu avotiem saņemtos datus, lai šos datus varētu nosūtīt kā daļu no ģenerētā elektroniskā dokumenta.</span><span class="sxs-lookup"><span data-stu-id="1603c-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="1603c-143">Iespējams, jums ir formatējums, kas jālieto kā tipiska kārtula, kuru nepieciešams atkārtoti izmantot kādam formātam.</span><span class="sxs-lookup"><span data-stu-id="1603c-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="1603c-144">Šajā gadījumā formāta konfigurācijā šo formatēšanu varat vienu reizi ieviest kā nosauktu pārveidošanu, kurai ir formatēšanas izteiksme.</span><span class="sxs-lookup"><span data-stu-id="1603c-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="1603c-145">Pēc tam šo nosaukto pārveidošanu var saistīt ar daudziem formāta komponentiem, kuriem ir nepieciešams formatēt izvadi atbilstoši jūsu izveidotajai formatēšanas izteiksmei.</span><span class="sxs-lookup"><span data-stu-id="1603c-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="1603c-146">Nākamajā attēlā ir parādīts šī tipa transformēšanas noformējums.</span><span class="sxs-lookup"><span data-stu-id="1603c-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="1603c-147">Šajā piemērā pārveidošana **TrimmedString** apcērt ienākošos datus ar datu tipu *String*, noņemot sākuma un beigu atstarpes.</span><span class="sxs-lookup"><span data-stu-id="1603c-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="1603c-148">Pēc tam tā atgriež apcirstu virknes vērtību.</span><span class="sxs-lookup"><span data-stu-id="1603c-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="1603c-149">[![Pārveidošana](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="1603c-150">Nākamajā attēlā ir parādīts, kā var lietot šī tipa transformēšanu.</span><span class="sxs-lookup"><span data-stu-id="1603c-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="1603c-151">Šajā piemērā vairāki formāta komponenti izpildes laikā kā izvadi uz ģenerēto elektronisko dokumentu sūta tekstu.</span><span class="sxs-lookup"><span data-stu-id="1603c-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="1603c-152">Visi šie formāta komponenti atsaucas uz pārveidošanu **TrimmedString** pēc nosaukuma.</span><span class="sxs-lookup"><span data-stu-id="1603c-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="1603c-153">[![Tiek izmantota pārveidošana](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="1603c-154">Kad formāta komponenti, piemēram, iepriekšējā attēlā norādītais komponents **partyName**, atsaucas uz pārveidošanu **TrimmedString**, pārveidošana uz ģenerēto elektronisko dokumentu kā izvadi sūta tekstu.</span><span class="sxs-lookup"><span data-stu-id="1603c-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="1603c-155">Šis teksts neietver sākuma un beigu atstarpes.</span><span class="sxs-lookup"><span data-stu-id="1603c-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="1603c-156">Ja jums ir formatējums, kas ir jālieto atsevišķi, šo formatējumu varat ieviest kā noteikta formāta komponenta saistīšanas atsevišķu izteiksmi.</span><span class="sxs-lookup"><span data-stu-id="1603c-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="1603c-157">Nākamajā attēlā ir parādīta šī tipa izteiksme.</span><span class="sxs-lookup"><span data-stu-id="1603c-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="1603c-158">Šajā piemērā formāta komponents **partyType** tiek saistīts ar datu avotu, izmantojot izteiksmi, kas ienākošos datus no lauka **Model.Company.RegistrationType** datu avotā pārveido par tekstu, kurš rakstīts ar lielajiem burtiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="1603c-159">Pēc tam izteiksme šo tekstu kā izvadi sūta uz elektronisko dokumentu.</span><span class="sxs-lookup"><span data-stu-id="1603c-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="1603c-160">[![Formatējuma lietošana atsevišķam komponentam](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="1603c-161">Apstrādes plūsmas kontrole</span><span class="sxs-lookup"><span data-stu-id="1603c-161">Process flow control</span></span>

<span data-ttu-id="1603c-162">ER formulas veidotāju var izmantot, lai definētu izteiksmes, kas kontrolē elektronisko dokumentu ģenerēšanas procesa plūsmu.</span><span class="sxs-lookup"><span data-stu-id="1603c-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="1603c-163">Jūs varat veikt tālāk norādītos uzdevumus.</span><span class="sxs-lookup"><span data-stu-id="1603c-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="1603c-164">Definējiet nosacījumus, kas nosaka, kad ir jāaptur dokumenta veidošanas process.</span><span class="sxs-lookup"><span data-stu-id="1603c-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="1603c-165">Norādiet izteiksmes, kas izveido ziņojumus lietotājam par apturētiem procesiem vai parāda izpildes žurnāla ziņojumus par pārskata ģenerēšanas procesa turpināšanu.</span><span class="sxs-lookup"><span data-stu-id="1603c-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="1603c-166">Norādiet ģenerēto elektronisko dokumentu failu nosaukumus un kontrolējiet to izveidošanas nosacījumus.</span><span class="sxs-lookup"><span data-stu-id="1603c-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="1603c-167">Katrs apstrādes plūsmas kontroles noteikums ir paredzēts kā atsevišķa pārbaude.</span><span class="sxs-lookup"><span data-stu-id="1603c-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="1603c-168">Nākamajā attēlā ir parādīta šī tipa pārbaude.</span><span class="sxs-lookup"><span data-stu-id="1603c-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="1603c-169">Šeit ir šajā piemērā lietotās konfigurācijas skaidrojums:</span><span class="sxs-lookup"><span data-stu-id="1603c-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="1603c-170">Pārbaude tiek novērtēta, kad XML faila ģenerēšanas laikā tiek izveidots mezgls **INSTAT**.</span><span class="sxs-lookup"><span data-stu-id="1603c-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="1603c-171">Ja transakciju saraksts ir tukšs, pārbaude aptur izpildes procesu un atgriež uzrakstu **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="1603c-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="1603c-172">Pārbaude atgriež kļūdas ziņojumu, kas ietver etiķetes SYS70894 tekstu lietotāja vēlamajā valodā.</span><span class="sxs-lookup"><span data-stu-id="1603c-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="1603c-173">[![Validēšana](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="1603c-174">ER formulas veidotāju var izmantot arī, lai ģenerētu faila nosaukumu ģenerētajam elektroniskajam dokumentam un kontrolētu faila izveides procesu.</span><span class="sxs-lookup"><span data-stu-id="1603c-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="1603c-175">Nākamajā attēlā ir parādīts šī tipa procesa plūsmas kontroles noformējums.</span><span class="sxs-lookup"><span data-stu-id="1603c-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="1603c-176">Šeit ir šajā piemērā lietotās konfigurācijas skaidrojums:</span><span class="sxs-lookup"><span data-stu-id="1603c-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="1603c-177">Ierakstu saraksts no datu avota **model.Intrastat** tiek sadalīts partijās.</span><span class="sxs-lookup"><span data-stu-id="1603c-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="1603c-178">Katrā no partijām ietverts līdz 1000 ierakstiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="1603c-179">Izvade izveido zip failu, kas katrai izveidotajai partijai satur vienu failu XML formātā.</span><span class="sxs-lookup"><span data-stu-id="1603c-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="1603c-180">Izteiksme atgriež faila nosaukumu ģenerētajiem elektroniskajiem dokumentiem, savienojot faila nosaukumu un faila nosaukuma paplašinājumu.</span><span class="sxs-lookup"><span data-stu-id="1603c-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="1603c-181">Otrajai partijai un visām turpmākajām partijām faila nosaukums kā sufiksu ietver partijas ID.</span><span class="sxs-lookup"><span data-stu-id="1603c-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="1603c-182">Izteiksme iespējo (atgriežot vērtību **TRUE**) faila izveides procesu partijām, kas ietver vismaz vienu ierakstu.</span><span class="sxs-lookup"><span data-stu-id="1603c-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="1603c-183">[![Apstrādes plūsmas kontrole](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="1603c-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="1603c-184">Dokumenta satura kontrole</span><span class="sxs-lookup"><span data-stu-id="1603c-184">Document content control</span></span>

<span data-ttu-id="1603c-185">ER formulu noformētāju var izmantot, lai konfigurētu izteiksmes, kuras kontrolē to, kādi dati tiks ievietoti ģenerētajos elektroniskajos dokumentos izpildlaikā.</span><span class="sxs-lookup"><span data-stu-id="1603c-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="1603c-186">Izteiksmes var iespējot vai atspējot konkrētu formāta elementu izvadi atkarībā no apstrādes datiem un konfigurētās loģikas.</span><span class="sxs-lookup"><span data-stu-id="1603c-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="1603c-187">Šīs izteiksmes var ievadīt viena formāta elementam cilnes **Kartēšana** laukā **Iespējots** lapā **Operāciju noformētājs**.</span><span class="sxs-lookup"><span data-stu-id="1603c-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="1603c-188">Izteiksmes var ievadīt kā loģisku nosacījumu, kas atgriež *Būla* vērtību:</span><span class="sxs-lookup"><span data-stu-id="1603c-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="1603c-189">Ja nosacījums atgriež **True**, tiek palaists pašreizējais formāta elements.</span><span class="sxs-lookup"><span data-stu-id="1603c-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="1603c-190">Ja nosacījums atgriež **False**, tiek izlaists pašreizējais formāta elements.</span><span class="sxs-lookup"><span data-stu-id="1603c-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="1603c-191">Nākamajā attēlā ir parādītas šī tipa izteiksmes.</span><span class="sxs-lookup"><span data-stu-id="1603c-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="1603c-192">(Kā piemēru izmanto Microsoft nodrošināto **ISO20022 kredīta pārsūtīšanas (NO)** formāta konfigurācijas 11.12.11 versiju.) **XMLHeader** formāta komponents ir konfigurēts tā, lai aprakstītu kredīta pārsūtīšanas ziņojuma struktūru saskaņā ar ISO 20022 XML ziņojumu standartiem.</span><span class="sxs-lookup"><span data-stu-id="1603c-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="1603c-193">Formāta komponents **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** ir konfigurēts, lai ģenerētajam ziņojumam pievienotu **Ustrd** XML elementu un ievietotu pārveduma formātu kā šādu XML elementu tekstu:</span><span class="sxs-lookup"><span data-stu-id="1603c-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="1603c-194">Komponents **PaymentNotes** tiek izmantots, lai ģenerētu tekstu no maksājuma piezīmēm.</span><span class="sxs-lookup"><span data-stu-id="1603c-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="1603c-195">Komponents **DelimitedSequence** ģenerē ar komatu atdalītus rēķina numurus, kuri tiek izmantoti, lai veiktu doto kredīta pārnesi.</span><span class="sxs-lookup"><span data-stu-id="1603c-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="1603c-196">[![PaymentNotes un DelimitedSequence komponenti](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="1603c-197">Komponenti **PaymentNotes** un **DelimitedSequence** tiek marķēti, izmantojot jautājumzīmi.</span><span class="sxs-lookup"><span data-stu-id="1603c-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="1603c-198">Jautājuma zīme norāda, ka komponenta lietošana ir nosacījumu.</span><span class="sxs-lookup"><span data-stu-id="1603c-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="1603c-199">Šādā gadījumā komponentu lietošana ir pamatota uz šādiem kritērijiem:</span><span class="sxs-lookup"><span data-stu-id="1603c-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="1603c-200">Izteiksme `@.PaymentsNotes <> ""`, kas definēta komponentam **PaymentNotes**, iespējo (atgriežot **TRUE**) XML elementu **Ustrd**, kurā jāievieto maksājuma piezīmju teksts, ja šis teksts pašreizējai kredīta pārvirzei nav tukšs.</span><span class="sxs-lookup"><span data-stu-id="1603c-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="1603c-201">[![PaymentNotes komponenta izteiksme](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="1603c-202">Izteiksme `@.PaymentsNotes = ""`, kas definēta komponentam **DelimitedSequence**, iespējo (atgriežot **TRUE**) XML elementu **Ustrd**, kas jāaizpilda ar ar komatu atdalītu rēķina numuru sarakstu, kuri tiek izmantoti, lai veiktu doto kredīta pārvadājumu, ja šī kredīta pārvadājuma maksājumu piezīmes nav tukšas.</span><span class="sxs-lookup"><span data-stu-id="1603c-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="1603c-203">[![DelimitedSequence komponenta izteiksme](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="1603c-204">Pamatojoties uz šo iestatījumu, ģenerētais ziņojums par katru debitora maksājumu — XML elements **Ustrd**— saturēs vai nu maksājuma piezīmju tekstu, vai, ja šis teksts ir tukšs, sarakstu, kurā ar komatiem atdalīti rēķina numuri, kas izmantoti, lai veiktu šo maksājumu.</span><span class="sxs-lookup"><span data-stu-id="1603c-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="1603c-205">Konfigurēto formulu validācija</span><span class="sxs-lookup"><span data-stu-id="1603c-205">Validation of configured formulas</span></span>

<span data-ttu-id="1603c-206">Lapā **formulas veidotājs** atlasiet **Testēt**, lai pārbaudītu, kā darbojas konfigurētā formula.</span><span class="sxs-lookup"><span data-stu-id="1603c-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="1603c-207">[![Testēšanas atlasīšana, lai validētu varbūt](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="1603c-208">Ja ir nepieciešamas formulas argumentu vērtības, jūs varat atvērt dialoglodziņu **Teksta izteiksme**, kas atrodas lapā **Formulas noformētājs**.</span><span class="sxs-lookup"><span data-stu-id="1603c-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="1603c-209">Vairumā gadījumu šiem argumentiem jābūt manuāli definētiem, jo konfigurētie saistījumi netiek palaisti noformēšanas laikā.</span><span class="sxs-lookup"><span data-stu-id="1603c-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="1603c-210">Lapas **Formulas noformētājs** cilnē **Testa rezultāts** tiek parādīts konfigurētās formulas izpildes rezultāts.</span><span class="sxs-lookup"><span data-stu-id="1603c-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="1603c-211">Šajā piemērā ir parādīts, kā var pārbaudīt ārējās tirdzniecības domēnam konfigurēto formulu, lai pārliecinātos, ka Intrastat preču kods satur tikai ciparus.</span><span class="sxs-lookup"><span data-stu-id="1603c-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="1603c-212">Testējot šo formulu, var izmantot dialoglodziņu **Testa izteiksme**, lai norādītu Intrastat preču koda vērtību testēšanai.</span><span class="sxs-lookup"><span data-stu-id="1603c-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="1603c-213">[![Intrastat preču kodu testēšanai norādīšana](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="1603c-214">Kad ir norādīts Intrastat preču kods un atlasīts **Labi**, lapas **Formulu noformētājs** cilnē **Testa rezultāts** tiek parādīts konfigurētās formulas izpildes rezultāts.</span><span class="sxs-lookup"><span data-stu-id="1603c-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="1603c-215">Pēc tam varat novērtēt, vai rezultāts ir pieņemams.</span><span class="sxs-lookup"><span data-stu-id="1603c-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="1603c-216">Ja rezultāts nav pieņemams, varat atjaunināt formulu un vēlreiz to pārbaudīt.</span><span class="sxs-lookup"><span data-stu-id="1603c-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="1603c-217">[![Testa rezultāts](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="1603c-218">Dažas formulas nevar testēt noformēšanas laikā.</span><span class="sxs-lookup"><span data-stu-id="1603c-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="1603c-219">Piemēram, formula var atgriezt datu tipa rezultātu, ko nevar parādīt cilnē **Testa rezultāts.** Šādā gadījumā tiek parādīts kļūdas ziņojums, kurā teikts, ka formulu nevar testēt.</span><span class="sxs-lookup"><span data-stu-id="1603c-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="1603c-220">[![Kļūdas ziņojums](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="1603c-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="1603c-221">Papildu resursi</span><span class="sxs-lookup"><span data-stu-id="1603c-221">Additional resources</span></span>

- [<span data-ttu-id="1603c-222">Elektronisko pārskatu veidošanas apskats</span><span class="sxs-lookup"><span data-stu-id="1603c-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="1603c-223">Elektronisko atskaišu veidošanas formulas valoda</span><span class="sxs-lookup"><span data-stu-id="1603c-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]