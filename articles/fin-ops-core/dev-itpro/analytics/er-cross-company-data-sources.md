---
title: Starpuzņēmumu datu avoti elektroniskajos pārskatos (ER)
description: Šajā tēmā ir paskaidrots, kā elektroniskajos pārskatos (Electronic Reporting — ER) varat izmantot starpuzņēmumu datu avotus.
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: f2e6b4f20464993f736b013dde40527aba2258ed
ms.sourcegitcommit: 564aa8eec89defdbe2abaf38d0ebc4cca3e28109
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 10/28/2019
ms.locfileid: "2667648"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="c189b-103">Starpuzņēmumu datu avoti elektroniskajos pārskatos (ER)</span><span class="sxs-lookup"><span data-stu-id="c189b-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="c189b-104">Varat noformēt elektronisko pārskatu (Electronic Reporting — ER) formātus, lai izejošos dokumentus ģenerētu dažādos formātos.</span><span class="sxs-lookup"><span data-stu-id="c189b-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="c189b-105">Kad dokuments tiek ģenerēts, ER formāts izsauc datu avotus, kas bija konfigurēti atbilstošā ER modeļa kartēšanā.</span><span class="sxs-lookup"><span data-stu-id="c189b-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="c189b-106">Lai ierakstu izgūšanai konfigurētu piekļuvi programmas tabulām, varat izmantot ER datu avotus ar tipu **Tabulas ieraksti**.</span><span class="sxs-lookup"><span data-stu-id="c189b-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="c189b-107">Ja tabula, kurai piekļūstat, ir koplietota tabula (tas ir, tabula, kur dati tiek saglabāti bez uzņēmuma identifikatora), šis datu avots atgriež visus ierakstus.</span><span class="sxs-lookup"><span data-stu-id="c189b-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="c189b-108">Ja tabula, kurai piekļūstat, ir no uzņēmuma atkarīga tabula (tas ir, tabula, kur dati tiek saglabāti pēc uzņēmuma), šis datu avots atgriež tikai ierakstus, kas ir saglabāti pašreizējam uzņēmumam (tas ir, tā uzņēmuma kontekstā, kurā darbojas šis ER formāts).</span><span class="sxs-lookup"><span data-stu-id="c189b-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="c189b-109">Katru datu avotu ar tipu **Tabulas ieraksti** modeļa kartēšanā tagad var atzīmēt kā starpuzņēmumu datu avotu.</span><span class="sxs-lookup"><span data-stu-id="c189b-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="c189b-110">Līdz ar to varat izmantot datu avotus ar tipu **Tabulas ieraksti**, lai piekļūtu starpuzņēmumu datiem programmas tabulās.</span><span class="sxs-lookup"><span data-stu-id="c189b-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="c189b-111">Ja kādu datu avotu atzīmējat kā starpuzņēmumu, tas darbojas tālāk norādītajā veidā.</span><span class="sxs-lookup"><span data-stu-id="c189b-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="c189b-112">Datu avotam, kas atsaucas uz jebkuru koplietoto tabulu, izņemot CompanyInfo, datu avots atgriež visus ierakstus, kas pastāv šajā tabulā, uz kuru ir atsauce.</span><span class="sxs-lookup"><span data-stu-id="c189b-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="c189b-113">Datu avotam, kas atsaucas uz tabulu CompanyInfo, lai gan CompanyInfo ir koplietota tabula, datu avots atgriež ierakstus, kuros ir definētajā tvērumā ietilpstošs uzņēmuma identifikators.</span><span class="sxs-lookup"><span data-stu-id="c189b-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="c189b-114">Visām no uzņēmuma atkarīgajām tabulām no tabulas, uz kuru pastāv atsauce, datu avots atgriež ierakstus, kuros ir definētajā tvērumā ietilpstošs uzņēmuma identifikators.</span><span class="sxs-lookup"><span data-stu-id="c189b-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="c189b-115">Sistēmas vaicājuma dialoglodziņā, kad ir ieslēgta opcija **Aptaujāt vaicājumam** visiem datu avotiem, kas ir atzīmēti kā starpuzņēmumu, varat manuāli atlasīt vienu vai vairākus uzņēmumus, ko ietvert cilnē **Uzņēmumu diapazons**.</span><span class="sxs-lookup"><span data-stu-id="c189b-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c189b-116">Tāpat kā citi filtri, arī uzņēmumu filtrs pastāv kā pēdējā izmantotā vērtība vaicājumiem, kad palaižat kādu ER formātu.</span><span class="sxs-lookup"><span data-stu-id="c189b-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="c189b-117">Filtrs netiek automātiski mainīts, ja datu avotam maināt starpuzņēmumu vērtību.</span><span class="sxs-lookup"><span data-stu-id="c189b-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="c189b-118">Lai izmantotu citu starpuzņēmumu vērtību citam datu avotam, izdzēsiet atbilstošo lietotājam raksturīgo atlasi.</span><span class="sxs-lookup"><span data-stu-id="c189b-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="c189b-119">Katram datu avotam, kas ir atzīmēts kā starpuzņēmumu, varat atlasīt ierakstus, kurus vēlaties, ER izteiksmēs izmantojot funkciju **FILTER** un funkciju **WHERE**.</span><span class="sxs-lookup"><span data-stu-id="c189b-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="c189b-120">Arī lauku **dataAreaID** var izmantot kā uzņēmuma identifikatoru.</span><span class="sxs-lookup"><span data-stu-id="c189b-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="c189b-121">Ja tiek izmantota funkcija **FILTER**, laukam **dataAreaID** pašlaik var izmantot tikai tālāk norādītos nosacījumu tipus.</span><span class="sxs-lookup"><span data-stu-id="c189b-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="c189b-122">Tiek atbalstīti tikai nosacījumi, kuriem ir viens lauka **dataAreaID** salīdzinājums.</span><span class="sxs-lookup"><span data-stu-id="c189b-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="c189b-123">Ir atļauti tikai salīdzinājumi, kuru izteiksmes nav atkarīgas no ierakstu saraksta vienumiem.</span><span class="sxs-lookup"><span data-stu-id="c189b-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="c189b-124">Tādēļ ir derīga tālāk norādītā izteiksme.</span><span class="sxs-lookup"><span data-stu-id="c189b-124">Therefore, the following expression is valid.</span></span>

```
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="c189b-125">Pēc noklusējuma tvērums ietver visus pašreizējās programmas uzņēmumus.</span><span class="sxs-lookup"><span data-stu-id="c189b-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="c189b-126">Taču to var ierobežot.</span><span class="sxs-lookup"><span data-stu-id="c189b-126">However, it can be restricted.</span></span> <span data-ttu-id="c189b-127">Lai ierobežotu starpuzņēmumu datu piekļuves tvērumu vienam ER formātam, piešķiriet šim formātam noteiktu organizācijas hierarhiju.</span><span class="sxs-lookup"><span data-stu-id="c189b-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="c189b-128">Kad ER formātam ir definēta kāda hierarhija, tiek atgriezti tikai ieraksti juridiskajām personām, kas atrodas piešķirtajā hierarhijā, lai gan ar formātu tiek izsaukti starpuzņēmumu datu avoti.</span><span class="sxs-lookup"><span data-stu-id="c189b-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="c189b-129">Ja kādam ER formātam ir definēta atsauce uz hierarhiju, kas vairs nepastāv, tiek lietots noklusējuma tvērums un ar formātu tiek izsaukti starpuzņēmumu datu avoti.</span><span class="sxs-lookup"><span data-stu-id="c189b-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="c189b-130">Šādā gadījumā tiek atgriezti ieraksti visiem programmas uzņēmumiem.</span><span class="sxs-lookup"><span data-stu-id="c189b-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="c189b-131">Ņemiet vērā, ka gadījumā, ja ir ieslēgta opcija **Izmantot melnrakstu** vienam ER formātam piešķirtai organizācijas hierarhijai, starpuzņēmumu datu avotu tvēruma identificēšanai tiks izmantotas juridiskās personas no šīs hierarhijas melnraksta versijas.</span><span class="sxs-lookup"><span data-stu-id="c189b-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="c189b-132">Ja melnraksta versija nepastāv, šim nolūkam tiks izmantotas juridiskās personas no šīs organizācijas hierarhijas pēdējās publicētās versijas.</span><span class="sxs-lookup"><span data-stu-id="c189b-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="c189b-133">Ņemiet vērā, ka gadījumā, ja ir izslēgta opcija **Izmantot melnrakstu** vienam ER formātam piešķirtai organizācijas hierarhijai, starpuzņēmumu datu avotu tvēruma identificēšanai tiks izmantotas juridiskās personas no šīs organizācijas hierarhijas pēdējās publicētās versijas.</span><span class="sxs-lookup"><span data-stu-id="c189b-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="c189b-134">ER struktūrā vēl netiek atbalstīti organizācijas hierarhiju spēkā stāšanās datumi.</span><span class="sxs-lookup"><span data-stu-id="c189b-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="c189b-135">Hierarhiju var piešķirt formātam noteiktā lapā, kurai var piekļūt no ER darbvietas vai izmantojot izvēlnes vienumu **Organizācijas administrēšana \>Elektroniskie pārskati \> Juridisko personu filtrs formātiem**.</span><span class="sxs-lookup"><span data-stu-id="c189b-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="c189b-136">Lai piekļūtu šai lapai, lietotājam ir jābūt piešķirtai privilēģijai **Uzturēt juridisko personu filtrus formātiem** (ERMaintainFormatMappingLegalEntityFilters).</span><span class="sxs-lookup"><span data-stu-id="c189b-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="c189b-137">No hierarhijas atkarīgu juridisko personu tvēruma ierobežojums formātam tiek lietots papildus ierobežojumam, kuru lietotājs var manuāli norādīt sistēmas vaicājuma dialoglodziņā.</span><span class="sxs-lookup"><span data-stu-id="c189b-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="c189b-138">Palaižot šo formātu, tiek izmantota šo ierobežojumu krustošanās.</span><span class="sxs-lookup"><span data-stu-id="c189b-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="c189b-139">Lai par šo līdzekli uzzinātu vairāk, noskatieties uzdevuma ceļvedi **ER Piekļuve no uzņēmuma atkarīgu tabulu ierakstiem starpuzņēmumu režīmā**, kas veido daļu no biznesa procesa 7.5.4.3 IT pakalpojumu/risinājumu komponentu iegāde/izstrāde (10677) un ko var lejupielādēt no [Microsoft lejupielādes centra](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="c189b-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="c189b-140">Šajā uzdevuma rokasgrāmatā ir izklāstīts ER modeļa kartēšanas un ER formāta konfigurēšanas process, lai piekļūtu programmas tabulām starpuzņēmumu režīmā.</span><span class="sxs-lookup"><span data-stu-id="c189b-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="c189b-141">Lai izpildītu šo uzdevuma ceļvedi, lejupielādējiet tālāk norādītos failus.</span><span class="sxs-lookup"><span data-stu-id="c189b-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="c189b-142">ER modeļa konfigurācija — CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="c189b-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="c189b-143">ER formāta konfigurācija — CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="c189b-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
