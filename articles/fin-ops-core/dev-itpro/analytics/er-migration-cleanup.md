---
title: ER migrācijas tīrīšana
description: Šajā tēmā skaidrots, kā var izmantot ER migrācijas tīrīšanas funkciju, lai atrisinātu problēmas ar ER veidnēm.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: b09afc30c401e2dccfc4114261dc5e713c8c470c
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565519"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="c776b-103">ER migrācijas tīrīšana</span><span class="sxs-lookup"><span data-stu-id="c776b-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="c776b-104">Kad pārvaldāt Finance instances, varat izlemt migrēt jūsu pašreizējo instanci uz citu vietu.</span><span class="sxs-lookup"><span data-stu-id="c776b-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="c776b-105">Piemēram, jūs varat migrēt savu ražošanas instanci uz jaunu smilškastes vidi.</span><span class="sxs-lookup"><span data-stu-id="c776b-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="c776b-106">Ja konfigurējāt Elektronisko pārskatu (ER) struktūru, lai saglabātu veidnes Microsoft Azure BLOB krātuvē, **DocuValue** tabula jaunajā sandbox vidē attiecas uz BLOB uzglabāšanas instanci ražošanas vidē.</span><span class="sxs-lookup"><span data-stu-id="c776b-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="c776b-107">Tomēr šai instancei nevar piekļūt no smilškastes vides, jo migrēšanas process neatbalsta artefaktu migrāciju BLOB krātuvē.</span><span class="sxs-lookup"><span data-stu-id="c776b-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="c776b-108">Drīzāk tiek prognozēts, ka jaunajā smilškastes vidē jūs atsaucaties uz BLOB glabāšanas instanci smilškastes vidē, kas vēl neiegūst ER veidnes.</span><span class="sxs-lookup"><span data-stu-id="c776b-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="c776b-109">Ja mēģināt palaist ER formātu, kas izmanto veidni, lai ģenerētu biznesa dokumentus, tiek veikts izņēmums, un jūs tiekat informēts par trūkstošajām veidnēm.</span><span class="sxs-lookup"><span data-stu-id="c776b-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="c776b-110">Varat arī izmantot ER migrācijas tīrīšanas rīka opciju, lai dzēstu un pēc tam atkārtoti importētu ER formāta konfigurāciju, kas satur veidni.</span><span class="sxs-lookup"><span data-stu-id="c776b-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="c776b-111">[![Palaist ER formātu](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="c776b-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="c776b-112">Jūs redzēsiet līdzīgu kļūdu, ja pārvietosieties uz **Konfigurācijas** lapu ( **Organizācijas administrēšana**\> **Elektroniskie pārskati**\> **Konfigurācijas**) un konfigurāciju kokā, mēģināsiet dzēst ER formāta konfigurāciju, kas izmanto veidni.</span><span class="sxs-lookup"><span data-stu-id="c776b-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="c776b-113">[![ER formāta dzēšana](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="c776b-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="c776b-114">Veiciet tālāk norādītās darbības, lai atrisinātu problēmas ar ER veidnēm, kurām nevarat piekļūt.</span><span class="sxs-lookup"><span data-stu-id="c776b-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="c776b-115">Dodieties uz **Organizācijas administrēšana**\> **Periodiskie**\> **Migrācijas tīrīšana** lapu.</span><span class="sxs-lookup"><span data-stu-id="c776b-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="c776b-116">Atlasiet ER formāta konfigurāciju, ko nevar izpildīt vai dzēst.</span><span class="sxs-lookup"><span data-stu-id="c776b-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="c776b-117">Atlasiet **Dzēst**.</span><span class="sxs-lookup"><span data-stu-id="c776b-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="c776b-118">Apstipriniet atlasītās ER formāta konfigurācijas dzēšanu.</span><span class="sxs-lookup"><span data-stu-id="c776b-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="c776b-119">[Importēt](download-electronic-reporting-configuration-lcs.md) dzēsto ER formāta konfigurāciju uz pašreizējo Finance instanci.</span><span class="sxs-lookup"><span data-stu-id="c776b-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="c776b-120">Piemērojamība</span><span class="sxs-lookup"><span data-stu-id="c776b-120">Applicability</span></span>

> <span data-ttu-id="c776b-121">[Svarīgi] **Migrācijas tīrīšanas** opcija ir paredzēta tikai ER formāta konfigurācijām, kas satur nepieejamas ER veidnes.</span><span class="sxs-lookup"><span data-stu-id="c776b-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="c776b-122">Kad dzēšat ER formāta konfigurāciju, izmantojot **Migrācijas tīrīšanas** opciju, ER dzēš veidnes, kas saistītas ar konfigurācijas artefaktiem vienīgajā programmas datu bāzē.</span><span class="sxs-lookup"><span data-stu-id="c776b-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="c776b-123">Atbilstošu fizisko failu esamība BLOB krātuvēs nav validēta.</span><span class="sxs-lookup"><span data-stu-id="c776b-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="c776b-124">Tā vietā tiek pieņemts, ka tādu nav.</span><span class="sxs-lookup"><span data-stu-id="c776b-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="c776b-125">Tāpēc neizmantojiet **Migrācijas tīrīšanas** opciju kā alternatīvu ER konfigurācijas dzēšanas opcijai **Konfigurācijas** lapā.</span><span class="sxs-lookup"><span data-stu-id="c776b-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="c776b-126">Izmantojiet **Migrācijas tīrīšanas** opciju tikai, kad ER konfigurācijas dzēšanas opcija **Konfigurācijas** lapā nav izdevusies.</span><span class="sxs-lookup"><span data-stu-id="c776b-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="c776b-127">Ja jūs izmantojat **Migrācijas tīrīšanas** opciju, lai dzēstu ER formāta konfigurāciju, kad saistītā veidne ir pieejama Blob glabātuvē, jūs izdzēšat tikai saistītos konfigurācijas artefaktus programmas datu bāzē.</span><span class="sxs-lookup"><span data-stu-id="c776b-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="c776b-128">Veidnes fiziskais fails BLOB krātuvē saglabājas.</span><span class="sxs-lookup"><span data-stu-id="c776b-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="c776b-129">Failu pārrakstīšana BLOB krātuvē vairs nav atļauta.</span><span class="sxs-lookup"><span data-stu-id="c776b-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="c776b-130">Lai iegūtu papildinformāciju, skatiet [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="c776b-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="c776b-131">Turklāt vairs nevarēsiet atkārtoti importēt konfigurācijas, kas dzēstas, izmantojot šajā vidē esošo Migrācijas tīrīšanu.</span><span class="sxs-lookup"><span data-stu-id="c776b-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="c776b-132">Lai atrisinātu šo problēmu, ir nepieciešams atrast atbilstošo failu BLOB krātuvē un to manuāli dzēst.</span><span class="sxs-lookup"><span data-stu-id="c776b-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="c776b-133">[![ER formāta importēšana](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="c776b-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="c776b-134">Līdzīga problēma var rasties, ja migrējat jūsu programmas instanci uz citu atrašanās vietu, kas izmantota kā migrācijas mērķis vairāk nekā vienu reizi un kam BLOB krātuvē jau ir ER veidnes faili.</span><span class="sxs-lookup"><span data-stu-id="c776b-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="c776b-135">Tā kā jums varētu būt vairāki ER formāta konfigurācijas, šis process var būt laikietilpīgs.</span><span class="sxs-lookup"><span data-stu-id="c776b-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="c776b-136">Tāpēc ieteicams izmantot [ER veidņu dublējumkopiju glabātuves](er-backup-storage-templates.md) iespēju, lai automātiski atkoptu veidnes ar sarautām atsaucēm.</span><span class="sxs-lookup"><span data-stu-id="c776b-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]