---
title: Mazumtirdzniecības transakciju konsekvences pārbaudītājs
description: Šajā tēmā ir aprakstīta transakciju konsekvences pārbaudītāja funkcionalitāte programmā Dynamics 365 Commerce.
author: josaw1
manager: AnnBe
ms.date: 10/07/2020
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: 3c7ca41b9e8a4c3127c98c756348959530a87996
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 10/13/2020
ms.locfileid: "4459445"
---
# <a name="retail-transaction-consistency-checker"></a><span data-ttu-id="0b8b1-103">Mazumtirdzniecības transakciju konsekvences pārbaudītājs</span><span class="sxs-lookup"><span data-stu-id="0b8b1-103">Retail transaction consistency checker</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="0b8b1-104">Šajā tēmā ir aprakstīta transakciju konsekvences pārbaudītāja funkcionalitāte programmā Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-104">This topic describes the transaction consistency checker functionality in Microsoft Dynamics 365 Commerce.</span></span> <span data-ttu-id="0b8b1-105">Konsekvences pārbaudītājs identificē un izolē nekonsekventas transakcijas, pirms tās ir uzņemtas pārskatu grāmatošanas procesā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-105">The consistency checker identifies and isolates inconsistent transactions before they are picked up by the statement posting process.</span></span>

<span data-ttu-id="0b8b1-106">Kad pārskats tiek grāmatots, grāmatošana var būt nesekmīga, jo tirdzniecības transakciju tabulās pastāv nekonsekventi dati.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-106">When a statement is posted, posting can fail due to inconsistent data in the commerce transaction tables.</span></span> <span data-ttu-id="0b8b1-107">Šādu datu kļūmi var izraisīt neparedzētas problēmas pārdošanas punkta (point of sale — POS) programmā, kā arī tā var rasties tad, ja transakcijas tiek nepareizi importētas no trešās puses POS sistēmām.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-107">The data issue may be caused by unforeseen issues in the point of sale (POS) application, or if transactions were incorrectly imported from third-party POS systems.</span></span> <span data-ttu-id="0b8b1-108">Tālāk ir uzskaitīti daži no šādas nekonsekvences potenciālās rašanās piemēriem.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-108">Examples of how these inconsistencies may appear include:</span></span> 

- <span data-ttu-id="0b8b1-109">Transakcijas kopsumma virsraksta tabulā neatbilst transakcijas kopsummai rindās.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-109">The transaction total on the header table does not match the transaction total on the lines.</span></span>
- <span data-ttu-id="0b8b1-110">Rindu skaits virsraksta tabulā neatbilst rindu skaitam transakcijas tabulā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-110">The line count on the header table does not match with the number of lines in the transaction table.</span></span>
- <span data-ttu-id="0b8b1-111">Nodokļi virsraksta tabulā neatbilst nodokļu summai rindās.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-111">Taxes on the header table do not match the tax amount on the lines.</span></span> 

<span data-ttu-id="0b8b1-112">Kad pārskatu grāmatošanas process uzņem nekonsekventas transakcijas, tiek izveidoti nekonsekventi pārdošanas rēķini un maksājumu žurnāli, līdz ar to viss pārskata grāmatošanas process ir nesekmīgs.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-112">When inconsistent transactions are picked up by the statement posting process, inconsistent sales invoices and payment journals are created, and the entire statement posting process fails as a result.</span></span> <span data-ttu-id="0b8b1-113">Lai atkoptu pārskatus no šāda stāvokļa, ir jāizmanto sarežģīti datu labojumi vairākās transakciju tabulās.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-113">Recovering the statements from such a state involves complex data fixes across multiple transaction tables.</span></span> <span data-ttu-id="0b8b1-114">Transakciju konsekvences pārbaudītājs neļauj šādu problēmu rašanos.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-114">The transaction consistency checker prevents such issues.</span></span>

<span data-ttu-id="0b8b1-115">Nākamajā diagrammā ir parādīts grāmatošanas process ar transakciju konsekvences pārbaudītāju.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-115">The following chart illustrates the posting process with the transaction consistency checker.</span></span>

<span data-ttu-id="0b8b1-116">![Pārskatu grāmatošanas process ar darījumu konsistences pārbaudītāju](./media/validchecker.png "Pārskatu grāmatošanas process ar mazumtirdzniecības transakciju konsekvences pārbaudītāju")</span><span class="sxs-lookup"><span data-stu-id="0b8b1-116">![Statement posting process with transaction consistency checker](./media/validchecker.png "Statement posting process with retail transaction consistency checker")</span></span>

<span data-ttu-id="0b8b1-117">Pakešveida apstrādes process **Pārbaudīt veikala transakcijas** pārbauda tirdzniecības transakciju tabulu konsekvenci tālāk norādītajos scenārijos.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-117">The **Validate store transactions** batch process checks the consistency of the commerce transaction tables for the following scenarios.</span></span>

- <span data-ttu-id="0b8b1-118">**Debitora konts** — pārbauda, vai attiecīgais debitora konts pastāv galvenā birojā debitoru pamatfaila transakciju tabulās.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-118">**Customer account** – Validates that the customer account in the transaction tables exists in the HQ customer master.</span></span>
- <span data-ttu-id="0b8b1-119">**Rindu skaits** — pārbauda, vai transakciju virsrakstu tabulā norādītais rindu skaits atbilst pārdošanas transakciju tabulu rindu skaitam.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-119">**Line count** – Validates that the number of lines, as captured on the transaction header table, matches the number of lines in the sales transaction tables.</span></span>
- <span data-ttu-id="0b8b1-120">**Cenā iekļauts nodoklis** — pārbauda, vai parametrs **Cenā iekļauts nodoklis** ir konsekvents transakciju rindās un cena pārdošanas rindā atbilst konfigurācijai par cenu, kurā iekļauts nodoklis, un nodokļu atvieglojumiem.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-120">**Price includes tax** – Validates that the **Price includes tax** parameter is consistent across transaction lines and the price on the sales line is in accordance with price includes tax and tax exempt configuration.</span></span>
- <span data-ttu-id="0b8b1-121">**Maksājuma summa** — pārbauda, vai maksājumu ieraksti atbilst maksājuma summai galvenē, ņemot vērā arī noapaļošanas konfigurāciju Virsgrāmatā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-121">**Payment amount** - Validates that the payment records match the payment amount on the header, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="0b8b1-122">**Bruto summa** — pārbauda, vai bruto summa galvenē ir rindu neto summu un nodokļu summa, ņemot vērā arī noapaļošanas konfigurāciju Virsgrāmatā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-122">**Gross amount** – Validates that the gross amount on the header is the sum of the net amounts on the lines plus the tax amount, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="0b8b1-123">**Neto summa** — pārbauda, vai neto summa galvenē ir rindu neto summa, ņemot vērā arī noapaļošanas konfigurāciju Virsgrāmatā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-123">**Net amount** – Validates that the net amount on the header is the sum of the net amounts on the lines, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="0b8b1-124">**Nepilnīgs maksājums/pārmaksa** — pārbauda, vai galvenē iekļautās bruto summas un maksājuma summas starpība nepārsniedz maksimālo konfigurēto nepilnīga maksājuma/pārmaksas summu, ņemot vērā arī noapaļošanas konfigurāciju Virsgrāmatā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-124">**Under / Over payment** – Validates that the difference between the gross amount on the header and the payment amount doesn't exceed the maximum underpayment/overpayment configuration, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="0b8b1-125">**Atlaides summa** — pārbauda, vai atlaižu tabulās un mazumtirdzniecības transakciju rindu tabulās norādītās atlaides summas ir konsekventas un vai virsrakstā iekļautā atlaides summa un rindās iekļautās atlaižu summas ir konsekventas, ņemot vērā arī noapaļošanas konfigurāciju Virsgrāmatā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-125">**Discount amount** – Validates that the discount amount on the discount tables and the discount amount on the transaction line tables are consistent, and that the discount amount on the header is the sum of the discount amounts on the lines, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="0b8b1-126">**Rindas atlaide** — pārbauda, vai transakcijas rindas atlaides summa ir visu atlaižu tabulas rindu summa, kas atbilst transakcijas rindai.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-126">**Line discount** – Validates that the line discount on the transaction line is the sum of all the lines in the discount table that corresponds to the transaction line.</span></span>
- <span data-ttu-id="0b8b1-127">**Dāvanu kartes krājums** — risinājumā Commerce netiek atbalstīta dāvanu karšu krājumu atgriešana.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-127">**Gift card item** – Commerce doesn't support the return of gift card items.</span></span> <span data-ttu-id="0b8b1-128">Tomēr dāvanu kartes atlikums var tikt izmaksāts skaidrā naudā. Visi tie dāvanu kartes krājumi, kas tiek apstrādāti kā atgriešanas rinda, nevis skaidras naudas izņemšanas rinda, netiek iekļauti grāmatošanas procesā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-128">However, the balance on a gift card can be cashed out. Any gift card item that is processed as a return line instead of a cash-out line fails the statement posting process.</span></span> <span data-ttu-id="0b8b1-129">Palaižot dāvanu karšu krājumu pārbaudes procesu, tiek nodrošināts, ka transakciju tabulās tiek atgriezti tikai tie dāvanu karšu rindas krājumi, kuri ir dāvanu karšu skaidras naudas izmaksas rindas.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-129">The validation process for gift card items helps guarantee that the only return gift card line items on the transaction tables are gift card cash-out lines.</span></span>
- <span data-ttu-id="0b8b1-130">**Negatīva cena** — pārbauda, vai nav nevienas transakciju rindas ar negatīvu cenu.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-130">**Negative price** – Validates that there are no negative price transaction lines.</span></span>
- <span data-ttu-id="0b8b1-131">**Krājums un variants** — pārbauda, vai transakcijas rindas krājumi un varianti pastāv krājumu un variantu pamatfailā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-131">**Item & Variant** – Validates that items and variants on the transaction lines exist in the item and variant master file.</span></span>
- <span data-ttu-id="0b8b1-132">**Nodokļu summa** — pārbauda nodokļu ierakstu atbilstību rindās norādītajām nodokļu summām.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-132">**Tax amount** - Validates that tax records match the tax amounts on the lines.</span></span>
- <span data-ttu-id="0b8b1-133">**Sērijas numurs** — pārbauda, vai sērijas numurs atrodas transakciju rindās krājumiem, kas tiek kontrolēti pēc sērijas numura.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-133">**Serial number** - Validates that the serial number is present in the transaction lines for items that are controlled by serial number.</span></span>
- <span data-ttu-id="0b8b1-134">**Zīme** — pārbauda, vai daudzuma un neto summas zīme ir vienāda visās transakciju rindās.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-134">**Sign** - Validates that the sign on the quantity and the net amount are the same in all the transaction lines.</span></span>
- <span data-ttu-id="0b8b1-135">**Darbadiena** — pārbauda, vai finanšu periodi visām transakciju darbadienām ir atvērti.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-135">**Business date** - Validates that the financial periods for all the business dates for the transactions are open.</span></span>
- <span data-ttu-id="0b8b1-136">**Maksas** — pārbauda, vai maksas summa galvenē un rindā atbilst cenai, tostarp arī nodokļu un nodokļu atvieglojumu konfigurācijai.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-136">**Charges** - Validates that the header and line charge amount is in accordance with price, including tax and tax exempt configuration.</span></span>

## <a name="set-up-the-consistency-checker"></a><span data-ttu-id="0b8b1-137">Konsekvences pārbaudītāja iestatīšana</span><span class="sxs-lookup"><span data-stu-id="0b8b1-137">Set up the consistency checker</span></span>

<span data-ttu-id="0b8b1-138">Sadaļā **Retail un Commerce \> Retail un Commerce IT \> POS grāmatošana** konfigurējiet pakešveida apstrādes procesu “Validēt veikala transakcijas” tā, lai tas tiktu palaists regulāri.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-138">Configure the "Validate store transactions" batch process, at **Retail and Commerce \> Retail and Commerce IT \> POS posting**, for periodic runs.</span></span> <span data-ttu-id="0b8b1-139">Pakešuzdevumu var plānot atkarībā no veikala organizācijas hierarhijas, līdzīgi kā tiek iestatīti procesi “Aprēķināt pārskatu partijā” un “Grāmatot pārskatu partijā”.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-139">The batch job can be scheduled based on store organization hierarchy, similar to how the "Calculate statement in batch" and "Post statement in batch" processes are set up.</span></span> <span data-ttu-id="0b8b1-140">Iesakām šo pakešuzdevumu konfigurēt tā, lai dienas laikā tas tiktu izpildīts vairākas reizes, un to ieplānot tā, lai tas tiktu izpildīts katras P darba izpildes beigās.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-140">We recommend that you configure this batch process to run multiple times in a day and schedule it so that it runs at the end of every P-job execution.</span></span>

## <a name="results-of-validation-process"></a><span data-ttu-id="0b8b1-141">Validēšanas procesa rezultāti</span><span class="sxs-lookup"><span data-stu-id="0b8b1-141">Results of validation process</span></span>

<span data-ttu-id="0b8b1-142">Šī pakešuzdevuma validēšanas pārbaudes rezultāti tiek atzīmēti atbilstošajā transakcijā.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-142">The results of the validation check by the batch process are tagged on the appropriate transaction.</span></span> <span data-ttu-id="0b8b1-143">Lauks **Validācijas statuss** transakcijas ierakstā ir iestatīts uz **Sekmīgs** vai **Kļūda**, un pēdējās validēšanas izpildes datums ir redzams laukā **Pēdējās validēšanas laiks**.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-143">The **Validation status** field on the transaction record is either set to **Successful** or **Error**, and the date of the last validation run appears on the **Last validation time** field.</span></span>

<span data-ttu-id="0b8b1-144">Lai redzētu aprakstošāku kļūdas tekstu saistībā ar validēšanas kļūmi, atlasiet attiecīgo veikala transakcijas ierakstu un noklikšķiniet uz pogas **Validācijas kļūdas**.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-144">To view more descriptive error text relating to a validation failure, select the relevant store transaction record and click the **Validation errors** button.</span></span>

<span data-ttu-id="0b8b1-145">Uz pārskatiem netiek nogādātas transakcijas, kam validācijas pārbaude ir nesekmīga, un transakcijas, kas vēl nav validētas.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-145">Transactions that fail the validation check and transactions that have not yet been validated will not be pulled into statements.</span></span> <span data-ttu-id="0b8b1-146">Procesa “Aprēķināt pārskatu” laikā lietotājiem tiek ziņots, vai pastāv transakcijas, kas varēja tikt ietvertas pārskatā, bet netika tajā ietvertas.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-146">During the "Calculate statement" process, users will be notified if there are transactions that could have been included in the statement but weren't.</span></span>

<span data-ttu-id="0b8b1-147">Ja tiek atrasta kāda validācijas kļūda, vienīgais veids, kā šo kļūdu novērst, ir sazināties ar Microsoft atbalsta dienestu.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-147">If a validation error is found, the only way to fix the error is to contact Microsoft Support.</span></span> <span data-ttu-id="0b8b1-148">Turpmākajos laidienos tiks pievienota iespēja lietotājiem izlabot nesekmīgos ierakstus, izmantojot lietotāja interfeisu.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-148">In a future release, capability will be added so that users can fix the records that failed through the user interface.</span></span> <span data-ttu-id="0b8b1-149">Kļūs pieejamas arī reģistrēšanas un auditēšanas iespējas, lai izsekotu modifikāciju vēsturi.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-149">Logging and auditing capabilities will also be made available to trace the history of the modifications.</span></span>

> [!NOTE]
> <span data-ttu-id="0b8b1-150">Kādā no turpmākajiem laidieniem tiks pievienotas papildu validēšanas kārtulas, lai atbalstītu vairāk scenāriju.</span><span class="sxs-lookup"><span data-stu-id="0b8b1-150">Additional validation rules to support more scenarios will be added in a future release.</span></span>
