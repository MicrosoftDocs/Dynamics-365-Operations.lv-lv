---
title: Visu kanālu maksājumu apskats
description: Šajā tēmā ir sniegts apskats par visu kanālu maksājumiem programmā Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 10/13/2020
ms.locfileid: "4414171"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="a60d0-103">Visu kanālu maksājumu apskats</span><span class="sxs-lookup"><span data-stu-id="a60d0-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="a60d0-104">Šajā tēmā ir sniegts apskats par visu kanālu maksājumiem programmā Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="a60d0-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="a60d0-105">Tajā ir visaptverošs atbalstīto scenāriju saraksts, informācija par funkcionalitāti, iestatīšanu un problēmu novēršanu, kā arī dažu tipisko problēmu apraksti.</span><span class="sxs-lookup"><span data-stu-id="a60d0-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="a60d0-106">Galvenie termini</span><span class="sxs-lookup"><span data-stu-id="a60d0-106">Key terms</span></span>

| <span data-ttu-id="a60d0-107">Termiņš</span><span class="sxs-lookup"><span data-stu-id="a60d0-107">Term</span></span> | <span data-ttu-id="a60d0-108">Apraksts</span><span class="sxs-lookup"><span data-stu-id="a60d0-108">Description</span></span> |
|---|---|
| <span data-ttu-id="a60d0-109">Marķieris</span><span class="sxs-lookup"><span data-stu-id="a60d0-109">Token</span></span> | <span data-ttu-id="a60d0-110">Datu virkne, ko maksājuma apstrādātājs nodrošina kā atsauci.</span><span class="sxs-lookup"><span data-stu-id="a60d0-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="a60d0-111">Marķieri var būt maksājumu karšu numuri, maksājumu autorizācijas un iepriekšējo maksājumu iegūšana.</span><span class="sxs-lookup"><span data-stu-id="a60d0-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="a60d0-112">Marķieri ir svarīgi, jo tie palīdz uzturēt sensitīvos datus ārpus pārdošanas punkta (point of sale — POS) sistēmas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="a60d0-113">Dažreiz tos sauc arī par *atsaucēm*.</span><span class="sxs-lookup"><span data-stu-id="a60d0-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="a60d0-114">Kartes marķieris</span><span class="sxs-lookup"><span data-stu-id="a60d0-114">Card token</span></span> | <span data-ttu-id="a60d0-115">Marķieris, ko maksājuma apstrādātājs nodrošina glabāšanai POS sistēmā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="a60d0-116">Kartes marķieri var izmantot tikai tirgotājs, kurš to saņem.</span><span class="sxs-lookup"><span data-stu-id="a60d0-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="a60d0-117">Karšu marķierus reizēm sauc arī par *karšu atsaucēm*.</span><span class="sxs-lookup"><span data-stu-id="a60d0-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="a60d0-118">Autorizācijas marķieris</span><span class="sxs-lookup"><span data-stu-id="a60d0-118">Authorization (auth) token</span></span> | <span data-ttu-id="a60d0-119">Unikāls ID, ko maksājuma apstrādātājs nodrošina kā daļu no atbildes, ko tas nosūta uz POS sistēmu pēc tam, kad POS sistēma veic autorizācijas pieprasījumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="a60d0-120">Autorizācijas marķieri var izmantot vēlāk, ja apstrādātājs tiek aicināts veikt tādas darbības kā autorizācijas apgriešanu vai anulēšanu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="a60d0-121">Taču visbiežāk to izmanto, lai iegūtu līdzekļus, kad pasūtījums ir izpildīts vai transakcija ir finalizēta.</span><span class="sxs-lookup"><span data-stu-id="a60d0-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="a60d0-122">Autorizācijas marķierus reizēm sauc arī par *autorizācijas atsaucēm*.</span><span class="sxs-lookup"><span data-stu-id="a60d0-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="a60d0-123">Iegūšanas marķieris</span><span class="sxs-lookup"><span data-stu-id="a60d0-123">Capture token</span></span> | <span data-ttu-id="a60d0-124">Atsauce, ko maksājuma apstrādātājs nodrošina POS sistēmai, kad maksājums ir finalizēts vai iegūts.</span><span class="sxs-lookup"><span data-stu-id="a60d0-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="a60d0-125">Iegūšanas marķieri pēc tam var izmantot, lai atsauktos uz maksājuma iegūšanu turpmākās operācijās, piemēram, atmaksas pieprasījumos.</span><span class="sxs-lookup"><span data-stu-id="a60d0-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="a60d0-126">Kartes nav</span><span class="sxs-lookup"><span data-stu-id="a60d0-126">Card not present</span></span> | <span data-ttu-id="a60d0-127">Termins, kas attiecas uz maksājumu transakcijām, kurās nav norādīta fiziska karte.</span><span class="sxs-lookup"><span data-stu-id="a60d0-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="a60d0-128">Piemēram, šīs transakcijas var notikt e-komercijas vai zvanu centra scenārijos.</span><span class="sxs-lookup"><span data-stu-id="a60d0-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="a60d0-129">Šīm transakcijām ar maksājumu saistītā informācija tiek manuāli ievadīta e-komercijas tīmekļa vietnē, zvanu centra plūsmā vai POS vai maksājumu terminālī.</span><span class="sxs-lookup"><span data-stu-id="a60d0-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="a60d0-130">Karte ir</span><span class="sxs-lookup"><span data-stu-id="a60d0-130">Card present</span></span> | <span data-ttu-id="a60d0-131">Termins, kas attiecas uz maksājumu transakcijām, kur fiziska karte tiek norādīta un lietota maksājumu terminālī, kurš ir savienots ar Microsoft Dynamics 365 POS sistēmu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="a60d0-132">Kopsavilkums</span><span class="sxs-lookup"><span data-stu-id="a60d0-132">Overview</span></span>

<span data-ttu-id="a60d0-133">Parasti termins *visu kanālu maksājumi* apraksta iespēju izveidot pasūtījumu vienā kanālā un izpildīt to citā kanālā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="a60d0-134">Galvenais visu kanālu maksājumu atbalsta princips ir maksājuma informācijas saglabāšana kopā ar pārējo pasūtījuma informāciju, un pēc tam šīs maksājuma informācijas izmantošana, kad attiecīgais pasūtījums tiek atkal izsaukts vai apstrādāts citā kanālā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="a60d0-135">Klasisks piemērs ir scenārijs “Pirkt tiešsaistē, saņemt veikalā”.</span><span class="sxs-lookup"><span data-stu-id="a60d0-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="a60d0-136">Šajā scenārijā maksājuma informācija tiek pievienota, kad pasūtījums tiek izveidots tiešsaistē.</span><span class="sxs-lookup"><span data-stu-id="a60d0-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="a60d0-137">Pēc tam šī informācija tiek atkal izsaukta POS, lai saņemšanas laikā iekasētu no klienta maksājumu kartes.</span><span class="sxs-lookup"><span data-stu-id="a60d0-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="a60d0-138">Visus šajā tēmā aprakstītos scenārijus var ieviest, izmantojot standarta maksājumu programmatūras izstrādes komplektu (SDK), kas ir iekļauts Commerce komplektācijā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="a60d0-139">Tēmā [Dynamics 365 maksājumu savienotājs pakalpojumam Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) ir sniegta ikviena šeit aprakstītā scenārija ieviešana standarta komplektācijā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="a60d0-140">Priekšnosacījumi</span><span class="sxs-lookup"><span data-stu-id="a60d0-140">Prerequisites</span></span>

<span data-ttu-id="a60d0-141">Katram šajā tēmā aprakstītajam scenārijam ir nepieciešams maksājumu savienotājs, kas atbalsta visu kanālu maksājumus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="a60d0-142">Var izmantot arī standarta komplektācijā ietverto Adyen savienotāju, jo tas atbalsta scenārijus, kuri ir padarīti pieejami, izmantojot maksājumu SDK.</span><span class="sxs-lookup"><span data-stu-id="a60d0-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="a60d0-143">Lai uzzinātu papildinformāciju par to, kā ieviest maksājumu savienotājus, un par Retail SDK vispār, apmeklējiet [mājas lapu Retail IT speciālistiem un izstrādātājiem](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="a60d0-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="a60d0-144">Atbalstītās versijas</span><span class="sxs-lookup"><span data-stu-id="a60d0-144">Supported versions</span></span>

<span data-ttu-id="a60d0-145">Šajā tēmā aprakstītās visu kanālu maksājumu iespējas tika izlaistas kā daļa no Microsoft Dynamics 365 for Retail versijas 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="a60d0-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="a60d0-146">Savienotāji “karte ir” un “kartes nav”</span><span class="sxs-lookup"><span data-stu-id="a60d0-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="a60d0-147">Maksājumu SDK paļaujas uz divām maksājumiem paredzētu lietojumprogrammu programmēšanas interfeisu (application programming interface — API) kopām.</span><span class="sxs-lookup"><span data-stu-id="a60d0-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="a60d0-148">Pirmās API kopas nosaukums ir **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="a60d0-149">Tā tiek izmantota, lai ieviestu maksājumu savienotājus “kartes nav”, kurus var izmantot visos zvanu centros un ar Microsoft Dynamics e-komercijas platformu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="a60d0-150">Plašāku informāciju par interfeisu **iPaymentProcessor** skatiet tehniskajā dokumentā [Maksājumu savienotāja un maksājumu ierīces ieviešana](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf), kurā ir aprakstīti maksājumi.</span><span class="sxs-lookup"><span data-stu-id="a60d0-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="a60d0-151">Otrās API kopas nosaukums ir **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="a60d0-152">Tā atbalsta maksājumu “karte ir” ieviešanu, kas izmanto maksājumu termināli.</span><span class="sxs-lookup"><span data-stu-id="a60d0-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="a60d0-153">Plašāku informāciju par interfeisu **iNamedRequestHandler** skatiet tēmā [Maksājumu integrācijas izveidošana maksājumu terminālim](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="a60d0-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="a60d0-154">Iestatīšana un konfigurēšana</span><span class="sxs-lookup"><span data-stu-id="a60d0-154">Setup and configuration</span></span>

<span data-ttu-id="a60d0-155">Ir nepieciešami tālāk norādītie komponenti un iestatīšanas soļi.</span><span class="sxs-lookup"><span data-stu-id="a60d0-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="a60d0-156">**E-komercijas integrācija:** ir nepieciešama integrācija ar Commerce lai atbalstītu scenārijus, kur pasūtījuma izcelsme ir tiešsaistes vitrīna.</span><span class="sxs-lookup"><span data-stu-id="a60d0-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="a60d0-157">Plašāku informāciju par Retail e-komercijas SDK skatiet tēmā [E-komercijas platformas programmatūras izstrādes komplekts (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="a60d0-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="a60d0-158">Demonstrācijas vidē atsauces vitrīna atbalsta visu kanālu maksājumu scenārijus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="a60d0-159">**Tiešsaistes maksājumu konfigurācija:** tiešsaistes kanāla iestatīšanai ir jāietver maksājumu savienotājs, kas ir atjaunināts, lai atbalstītu visu kanālu maksājumus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="a60d0-160">Var arī izmantot standarta komplektācijā ietverto maksājumu savienotāju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="a60d0-161">Informāciju par to, ka konfigurēt Adyen maksājumu savienotāju tiešsaistes veikaliem, skatiet tēmā [Adyen maksājumu savienotājs](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="a60d0-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="a60d0-162">Papildus šajā tēmā aprakstītajai e-komercijas iestatīšanai, Adyen savienotāja iestatījumos parametra **Ļaut maksājumu informācijas saglabāšanu e-komercijā** vērtība ir jāiestata uz **True**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="a60d0-163">**Visu kanālu maksājumu konfigurācija:** iekšējās uzskaites daļā dodieties uz **Retail un Commerce \> Headquarters iestatīšana \> Parametri \> Commerce koplietojamie parametri**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="a60d0-164">Pēc tam cilnē **Visu kanālu maksājumi** opcijai **Izmantot visu kanālu maksājumus** iestatiet vērtību **Jā**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="a60d0-165">Commerce versijās 10.0.12 un jaunākās versijās šis iestatījums ir **Funkciju pārvaldības** darbvietā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="a60d0-166">Atlasiet **Universālā kanāla maksājumu** funkciju un noklikšķiniet uz **Iespējot tūlīt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="a60d0-167">**Maksājumu pakalpojumi:** lai apstrādātu maksājumus, zvanu centrs izmanto noklusējuma maksājumu savienotāju lapā **Maksājumu pakalpojumi**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="a60d0-168">Lai atbalstītu tādus scenārijus kā, piemēram, “Pirkt zvanu centrā, saņemt veikalā”, šim noklusējuma maksājumu savienotājam ir jābūt Adyen maksājumu savienotājam vai maksājumu savienotājam, kas atbilst visu kanālu maksājumu ieviešanas prasībām.</span><span class="sxs-lookup"><span data-stu-id="a60d0-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="a60d0-169">**EFT pakalpojums:** maksājumiem caur maksājumu termināli ir jābūt iestatītiem aparatūras profila kopsavilkuma cilnē **EFT pakalpojums**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="a60d0-170">Adyen savienotājs atbalsta standarta komplektācijā ietvertos visu kanālu maksājumu scenārijus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="a60d0-171">Var izmantot arī citus maksājumu savienotājus, kas atbalsta interfeisu **iNamedRequestHandler**, ja tie atbalsta visu kanālu maksājumus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="a60d0-172">**Maksājumu savienotāja pieejamība:** kad tiek atkal izsaukts kāds pasūtījums, maksājuma norēķina rindas, kas tiek atkal izsauktas kopā ar šo pasūtījumu, ietver tā maksājumu savienotāja nosaukumu, kurš tika izmantots ar šo pasūtījumu saistīto autorizāciju izveidošanai.</span><span class="sxs-lookup"><span data-stu-id="a60d0-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="a60d0-173">Kad pasūtījums ir izpildīts, maksājumu SDK mēģina izmantot to pašu savienotāju, kas tika izmantots sākotnējās autorizācijas izveidošanai.</span><span class="sxs-lookup"><span data-stu-id="a60d0-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="a60d0-174">Tādēļ maksājumu savienotājam, kuram ir tādi paši tirgotāja rekvizīti, ir jābūt pieejamam tveršanai.</span><span class="sxs-lookup"><span data-stu-id="a60d0-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="a60d0-175">**Karšu tipi:** lai visu kanālu scenāriji darbotos pareizi, katram kanālam ir nepieciešams tāds pats norēķinu tipu iestatījums, kādu var izmantot visiem kanāliem.</span><span class="sxs-lookup"><span data-stu-id="a60d0-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="a60d0-176">Šis iestatījums ietver maksāšanas metodes ID un kartes tipa ID.</span><span class="sxs-lookup"><span data-stu-id="a60d0-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="a60d0-177">Piemēram, ja norēķinu tipam **Kartes** tiešsaistes veikala iestatījumā identifikators (ID) ir **2**, arī mazumtirdzniecības veikala iestatījumā šim tipam ir nepieciešams tāds pats ID.</span><span class="sxs-lookup"><span data-stu-id="a60d0-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="a60d0-178">Tādas pašas prasības attiecas arī uz kartes tipa ID.</span><span class="sxs-lookup"><span data-stu-id="a60d0-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="a60d0-179">Ja tiešsaistes veikalā kartes numurs **12** ir iestatīts kā **VISA**, arī mazumtirdzniecības veikalā tam ir jāiestata tāds pats ID.</span><span class="sxs-lookup"><span data-stu-id="a60d0-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="a60d0-180">Retail Modern POS operētājsistēmai Windows ar Android ar iebūvētu aparatūras staciju -vai-</span><span class="sxs-lookup"><span data-stu-id="a60d0-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="a60d0-181">Modern POS operētājsistēmai iOS vai Cloud POS ar savienotu koplietojamo aparatūras staciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="a60d0-182">Visu kanālu maksājumu atbalsta pamatprincips</span><span class="sxs-lookup"><span data-stu-id="a60d0-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="a60d0-183">Maksājumu savienojumi un maksājumu apstrādātāji izmanto marķierus jeb atsauces, lai atsauktos uz mijiedarbībām, kas ir saistītas ar karšu maksājumiem.</span><span class="sxs-lookup"><span data-stu-id="a60d0-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="a60d0-184">Piemēram, kad tiek pieprasīta maksājuma autorizācija, tiek norādīta atsauce uz šo autorizāciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="a60d0-185">Tādēļ uz autorizāciju var atsaukties vēlāk, kad izpildīšanas laikā tiek iegūti līdzekļi.</span><span class="sxs-lookup"><span data-stu-id="a60d0-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="a60d0-186">Tirgotājam, maksājumu savienotājam un apstrādātājam šī autorizācija ir unikāla.</span><span class="sxs-lookup"><span data-stu-id="a60d0-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="a60d0-187">Ja tiešsaistē izveidots pasūtījums tiek saņemts veikalā, šim pasūtījumam ir atkal jāizsauc un jālieto tā pati maksājuma informācija.</span><span class="sxs-lookup"><span data-stu-id="a60d0-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="a60d0-188">Kad sākotnējā informācija tiek sniegta kā daļa no pieprasījuma iegūt maksājumu pret sākotnējo autorizāciju, maksājuma apstrādātājs var apstrādāt pieprasījumu un iegūt maksājumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="a60d0-189">Lai pareizi atsauktos uz tiešsaistes pasūtījumu, ir jābūt pieejamam arī maksājumu savienotājam “kartes nav”, kas atbalsta to pašu apstrādātāju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="a60d0-190">Šādi POS sistēmai var būt viens apstrādātājs maksājumiem “karte ir”, bet tam var būt piekļuve arī citiem maksājumu savienotājiem, lai tas varētu izpildīt citos kanālos izveidotus pasūtījumus, izmantojot dažādus maksājumu apstrādātājus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="a60d0-191">Atbalstītie scenāriji</span><span class="sxs-lookup"><span data-stu-id="a60d0-191">Supported scenarios</span></span>

<span data-ttu-id="a60d0-192">Tiek atbalstīti tālāk norādītie visu kanālu maksājumu scenāriji.</span><span class="sxs-lookup"><span data-stu-id="a60d0-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="a60d0-193">Pirkt tiešsaistē, saņemt veikalā</span><span class="sxs-lookup"><span data-stu-id="a60d0-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="a60d0-194">Pirkt zvanu centrā, saņemt veikalā</span><span class="sxs-lookup"><span data-stu-id="a60d0-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="a60d0-195">Pirkt veikalā A, saņemt veikalā B</span><span class="sxs-lookup"><span data-stu-id="a60d0-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="a60d0-196">Pirkt veikalā A, nosūtīt klientam</span><span class="sxs-lookup"><span data-stu-id="a60d0-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="a60d0-197">Zvanu centrā veiktie maksājumi, kas kartēti ar norēķinu funkciju “Parasts”, ir jāatzīmē kā **Priekšapmaksa** = **Jā**, lai tie tiktu atspoguļoti maksājamajā summā, atsaucot pasūtījumu POS.</span><span class="sxs-lookup"><span data-stu-id="a60d0-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="a60d0-198">Maksājumi, kas nav priekšapmaksas, ar tipu “Parasts” netiek atpazīti, kad pasūtījums tiek atsaukts POS.</span><span class="sxs-lookup"><span data-stu-id="a60d0-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="a60d0-199">Tiek atbalstītas arī šo scenāriju variācijas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="a60d0-200">Piemēram, tiešsaistes pasūtījumā var būt ietvertas gan rindas, kas tiks nosūtītas klientam, gan rindas, kas tiks saņemtas veikalā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="a60d0-201">Visas pasūtījumu izpildes opcijas tiek atbalstītas, izmantojot visu kanālu maksājumus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="a60d0-202">Nākamajās sadaļās ir aprakstītas darbības katram scenārijam un parādīts, kā palaist scenāriju, izmantojot demonstrācijas datus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="a60d0-203">Pirkt tiešsaistē, saņemt veikalā</span><span class="sxs-lookup"><span data-stu-id="a60d0-203">Buy online, pick up in store</span></span>

<span data-ttu-id="a60d0-204">Pirms sākat, jums ir jāpārliecinās, vai ir izpildīti tālāk norādītie priekšnosacījumi.</span><span class="sxs-lookup"><span data-stu-id="a60d0-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="a60d0-205">Jums ir atsauces vitrīna, kur ir konfigurēts Adyen savienotājs.</span><span class="sxs-lookup"><span data-stu-id="a60d0-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="a60d0-206">Opcija **Visu kanālu maksājumi** lapā **Commerce koplietojamie parametri** ir iestatīta uz **True**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="a60d0-207">Jaunākās versijās šis iestatījums tiek pārvietots uz **Funkciju pārvaldības** darbvietu, kur varat izvēlēties **Universālā kanāla maksājumu** funkciju un noklikšķiniet uz **Iespējot tūlīt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="a60d0-208">Adyen maksājumu savienotājs ir konfigurēts Hjūstonas POS reģistram.</span><span class="sxs-lookup"><span data-stu-id="a60d0-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="a60d0-209">Retail Modern POS operētājsistēmai Windows ar Android ar iebūvētu aparatūras staciju -vai-</span><span class="sxs-lookup"><span data-stu-id="a60d0-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="a60d0-210">Modern POS operētājsistēmai iOS vai Cloud POS ar savienotu koplietojamo aparatūras staciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="a60d0-211">Lai palaistu šo scenāriju, izpildiet tālāk aprakstītās darbības.</span><span class="sxs-lookup"><span data-stu-id="a60d0-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="a60d0-212">Atsauces vitrīnā izveidojiet pasūtījumu saņemšanai veikalā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="a60d0-213">Noteikti atlasiet veikalu **Hjūstona**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="a60d0-214">Izpildiet norēķināšanās procedūru un samaksājiet, izmantojot testa kredītkartes numuru.</span><span class="sxs-lookup"><span data-stu-id="a60d0-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="a60d0-215">Testa kredītkaršu numuri ir atrodami [Adyen testa karšu numuru lapā](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="a60d0-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="a60d0-216">Programmā Commerce izmantojiet pakešuzdevumu **Sinhronizēt pasūtījumus** un sadales grafiku **P-001**, lai izveidotu pasūtījumus iekšējās uzskaites daļā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="a60d0-217">Pārdošanas punkta (POS) sveiciena lapā atlasiet operāciju **Saņemamie pasūtījumi**, lai redzētu pasūtījumus, kurus ir paredzēts saņemt veikalā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="a60d0-218">Atlasiet vienu vai vairākas rindas no pasūtījuma, kurš tika izveidots atsauces vitrīnā, un pēc tam atlasiet **Saņemt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="a60d0-219">Pasūtījums tiek izgūts no iekšējās uzskaites daļas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="a60d0-220">Kad pasūtījuma rindas informācija ir izgūta no iekšējās uzskaites daļas un tiek konstatēts kartes maksājums, ko var izmantot visiem kanāliem, jūs tiekat informēts, ka ir pieejama maksāšanas metode.</span><span class="sxs-lookup"><span data-stu-id="a60d0-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="a60d0-221">Atlasiet **Izmantot pieejamu maksāšanas metodi**, lai pabeigtu transakciju, izmantojot atsauces vitrīnā ievadīto kartes informāciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="a60d0-222">Pasūtījuma rindas tiek ielādētas transakcijas lapā, un apmaksājamā bilance ir 0 (nulle).</span><span class="sxs-lookup"><span data-stu-id="a60d0-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="a60d0-223">Atlasiet cilni **Maksājumi**, lai skatītu norēķinu rindu, kas tika izgūta no tiešsaistes pasūtījuma.</span><span class="sxs-lookup"><span data-stu-id="a60d0-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="a60d0-224">Atlasiet jebkuru maksāšanas metodi, lai pabeigtu šo transakciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="a60d0-225">Pirkt zvanu centrā, saņemt veikalā</span><span class="sxs-lookup"><span data-stu-id="a60d0-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="a60d0-226">Programmas Commerce lapas **Klientu apkalpošana** meklēšanas lodziņā ievadiet **Zane Siliņa** un pēc tam atlasiet **Meklēt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="a60d0-227">Meklēšanas rezultātos atlasiet **Zane Siliņa**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="a60d0-228">Kad Zane ir ielādēta lapā **Klientu apkalpošana**, atlasiet **Jauns pārdošanas pasūtījums**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="a60d0-229">Jaunā pārdošanas pasūtījuma lapā atlasiet **Virsraksts**, lai apskatītu pasūtījuma virsrakstu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="a60d0-230">Lapā **Pasūtījuma virsraksts** iestatiet vietu uz **Centrāle** un noliktavu uz **Hjūstona**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="a60d0-231">Cilnē **Piegādāt** lauku **Piegādes veids** iestatiet uz **60** izsniegšanai klientiem.</span><span class="sxs-lookup"><span data-stu-id="a60d0-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="a60d0-232">Atlasiet **Rindas** un pēc tam pievienojiet pasūtījumam vienu vai vairākas rindas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="a60d0-233">Atlasiet **Pabeigt**, lai pasūtījumu ievadītu pabeigšanas plūsmā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="a60d0-234">Ritiniet uz leju līdz maksājumu sadaļai, atlasiet **Pievienot** un pēc tam atlasiet rindu, kur maksāšanas metodes tips ir iestatīts uz **Kartes**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="a60d0-235">Atlasiet plus zīmi (**+**), lai pievienotu kartes maksājumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="a60d0-236">Ievadiet informāciju par testa kredītkartes numuru, kuru atradāt [Adyen testa karšu numuru lapā](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), un pēc tam atlasiet **Labi**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a60d0-237">Ja jūsu ievadītā kartes numura zīmols atšķiras no zīmola, kas tika atlasīts maksājuma uzsākšanas laikā, maksājums tik un tā tiks apstrādāts.</span><span class="sxs-lookup"><span data-stu-id="a60d0-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="a60d0-238">Taču tas tiks grāmatots kontiem, kas ir kartēti uz karšu zīmolu, kuru atlasījāt 10. darbībā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="a60d0-239">Vēlreiz atlasiet **Labi**, lai aizvērtu dialoglodziņu **Pasūtījuma pabeigšanas maksājumi**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="a60d0-240">Lapā **Pārdošanas pasūtījuma kopsavilkums** atlasiet **Iesniegt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="a60d0-241">Pārdošanas punkta (POS) sveiciena lapā atlasiet operāciju **Saņemamie pasūtījumi**, lai redzētu pasūtījumus, kurus ir paredzēts saņemt veikalā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="a60d0-242">Atlasiet vienu vai vairākas rindas no pasūtījuma, kurš tika izveidots atsauces vitrīnā, un pēc tam atlasiet **Saņemt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="a60d0-243">Pasūtījums tiek izgūts no iekšējās uzskaites daļas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="a60d0-244">Kad pasūtījuma rindas informācija ir izgūta no iekšējās uzskaites daļas un tiek konstatēts kartes maksājums, ko var izmantot visiem kanāliem, jūs tiekat informēts, ka ir pieejama maksāšanas metode.</span><span class="sxs-lookup"><span data-stu-id="a60d0-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="a60d0-245">Atlasiet **Izmantot pieejamu maksāšanas metodi**, lai pabeigtu transakciju, izmantojot atsauces vitrīnā ievadīto kartes informāciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="a60d0-246">Pasūtījuma rindas tiek ielādētas transakcijas lapā, un apmaksājamā bilance ir 0 (nulle).</span><span class="sxs-lookup"><span data-stu-id="a60d0-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="a60d0-247">Atlasiet cilni **Maksājumi**, lai skatītu norēķinu rindu, kas tika izgūta no tiešsaistes pasūtījuma.</span><span class="sxs-lookup"><span data-stu-id="a60d0-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="a60d0-248">Atlasiet jebkuru maksāšanas metodi, lai pabeigtu šo transakciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="a60d0-249">Pirkt veikalā A, saņemt veikalā B</span><span class="sxs-lookup"><span data-stu-id="a60d0-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="a60d0-250">Palaidiet pārdošanas punktu (POS) Hjūstonas veikalam.</span><span class="sxs-lookup"><span data-stu-id="a60d0-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="a60d0-251">Lapā **Transakcija** pievienojiet transakcijai Zani Siliņu, ar ciparu tastatūru ievadot **2001**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="a60d0-252">Pievienot transakcijai vienu vai vairākas rindas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="a60d0-253">Atlasiet **Pasūtījumi**, lai skatītu pasūtījuma opcijas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="a60d0-254">Atlasiet **Saņemt visu** un pēc tam, kad tiek parādīta uzvedne, atlasiet **Klienta pasūtījums**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="a60d0-255">Meklēšanas joslā ievadiet **Sietla** un pēc tam saņemšanai atlasiet veikalu **Sietla**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="a60d0-256">Atlasiet **Labi**, lai kā saņemšanas datumu apstiprinātu pašreizējo datumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="a60d0-257">Atlasiet **Maksājums ar karti**, lai uzsāktu maksājumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="a60d0-258">Norēķinieties ar kartes maksājumu par depozītam paredzēto summu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="a60d0-259">Pabeidziet šo depozīta maksājumu maksājumu terminālī.</span><span class="sxs-lookup"><span data-stu-id="a60d0-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="a60d0-260">Kad depozīts ir apmaksāts, atlasiet šo opciju, lai to pašu karti izmantotu izpildīšanai, un gaidiet pasūtījuma pabeigšanu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="a60d0-261">Palaidiet pārdošanas punktu (POS) Sietlas veikalam.</span><span class="sxs-lookup"><span data-stu-id="a60d0-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="a60d0-262">Pārdošanas punkta (POS) sveiciena lapā atlasiet operāciju **Saņemamie pasūtījumi**, lai redzētu pasūtījumus, kurus ir paredzēts saņemt veikalā.</span><span class="sxs-lookup"><span data-stu-id="a60d0-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="a60d0-263">Atlasiet vienu vai vairākas rindas no pasūtījuma, kurš tika izveidots atsauces vitrīnā, un pēc tam atlasiet **Saņemt**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="a60d0-264">Pasūtījums tiek izgūts no iekšējās uzskaites daļas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="a60d0-265">Kad pasūtījuma rindas informācija ir izgūta no iekšējās uzskaites daļas un tiek konstatēts kartes maksājums, ko var izmantot visiem kanāliem, jūs tiekat informēts, ka ir pieejama maksāšanas metode.</span><span class="sxs-lookup"><span data-stu-id="a60d0-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="a60d0-266">Atlasiet **Izmantot pieejamu maksāšanas metodi**, lai pabeigtu transakciju, izmantojot atsauces vitrīnā ievadīto kartes informāciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="a60d0-267">Pasūtījuma rindas tiek ielādētas transakcijas lapā, un apmaksājamā bilance ir 0 (nulle).</span><span class="sxs-lookup"><span data-stu-id="a60d0-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="a60d0-268">Atlasiet cilni **Maksājumi**, lai skatītu norēķinu rindu, kas tika izgūta no tiešsaistes pasūtījuma.</span><span class="sxs-lookup"><span data-stu-id="a60d0-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="a60d0-269">Atlasiet jebkuru maksāšanas metodi, lai pabeigtu šo transakciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="a60d0-270">Pirkt veikalā A, nosūtīt klientam</span><span class="sxs-lookup"><span data-stu-id="a60d0-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="a60d0-271">Palaidiet pārdošanas punktu (POS) Hjūstonas veikalam.</span><span class="sxs-lookup"><span data-stu-id="a60d0-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="a60d0-272">Lapā **Transakcija** pievienojiet transakcijai Zani Siliņu, ar ciparu tastatūru ievadot **2001**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="a60d0-273">Pievienot transakcijai vienu vai vairākas rindas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="a60d0-274">Atlasiet **Pasūtījumi**, lai skatītu pasūtījuma opcijas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="a60d0-275">Atlasiet **Nosūtīt visu** un pēc tam, kad tiek parādīta uzvedne, atlasiet **Klienta pasūtījums**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="a60d0-276">Lapā nosūtīšanas metode atlasiet **Standarta piegāde pa nakti** un pēc tam atlasiet **Labi**, lai pieņemtu šodienas datumu kā nosūtīšanas datumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="a60d0-277">Atlasiet **Labi**, lai kā saņemšanas datumu apstiprinātu pašreizējo datumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="a60d0-278">Atlasiet **Maksājums ar karti**, lai uzsāktu maksājumu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="a60d0-279">Norēķinieties ar kartes maksājumu par depozītam paredzēto summu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="a60d0-280">Pabeidziet šo depozīta maksājumu maksājumu terminālī.</span><span class="sxs-lookup"><span data-stu-id="a60d0-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="a60d0-281">Kad depozīts ir apmaksāts, atlasiet šo opciju, lai to pašu karti izmantotu izpildīšanai, un gaidiet pasūtījuma pabeigšanu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="a60d0-282">Kad pasūtījums ir saņemts, iepakots un par to ir izrakstīts rēķins iekšējā uzskaites daļā, pārdošanas punktā (POS) norādītā maksājuma informācija tiek izmantota, lai iegūtu līdzekļus par klientam nosūtītajām precēm.</span><span class="sxs-lookup"><span data-stu-id="a60d0-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="a60d0-283">Detalizēta informācija par scenāriju</span><span class="sxs-lookup"><span data-stu-id="a60d0-283">Scenario details</span></span>

<span data-ttu-id="a60d0-284">Papildus tikko aprakstītajiem pamata scenārijiem maksājumu SDK ir veikti vairāki uzlabojumi, lai atbalstītu visu kanālu maksājumus.</span><span class="sxs-lookup"><span data-stu-id="a60d0-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="a60d0-285">POS</span><span class="sxs-lookup"><span data-stu-id="a60d0-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="a60d0-286">Viena kartes novilkšana/ievietošana klientu pasūtījumiem</span><span class="sxs-lookup"><span data-stu-id="a60d0-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="a60d0-287">Pirms visu kanālu maksāšanas līdzekļa ieviešanas, kad pārdošanas punktā (POS) tika izveidoti klientu pasūtījumi, kuros bija depozīti, klientiem bija nepieciešams novilkt (vai ievietot) savas kartes divreiz: vienu reizi, lai samaksātu depozītu, un vēl vienu reizi, lai kartei piešķirtu marķieri turpmākai pasūtījumu izpildīšanai.</span><span class="sxs-lookup"><span data-stu-id="a60d0-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="a60d0-288">Kad ir ieslēgts visu kanālu marķieru piešķiršanas līdzeklis, klientiem savas kartes ir jānovelk tikai vienreiz, lai gan samaksātu depozītu, gan autorizētu par precēm maksājamo summu, kura tiks izpildīta vēlāk.</span><span class="sxs-lookup"><span data-stu-id="a60d0-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="a60d0-289">Izpildes laikā tiek iegūti autorizētie līdzekļi.</span><span class="sxs-lookup"><span data-stu-id="a60d0-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="a60d0-290">Pirms visu kanālu marķieru piešķiršanas līdzekļa ieviešanas turpmākai pasūtījumu izpildīšanai tika izveidots tikai periodisks kartes marķieris.</span><span class="sxs-lookup"><span data-stu-id="a60d0-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="a60d0-291">Tādēļ līdzekļi gaidošajai izpildīšanai netika autorizēti un — tā kā šie līdzekļi netika aizturēti šim konkrētajam pirkumam — pastāvēja mazāka iespējamība, ka tos varētu iegūt vēlāk.</span><span class="sxs-lookup"><span data-stu-id="a60d0-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="a60d0-292">Viena kartes novilkšana netiek atbalstīta Retail versijā 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="a60d0-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="a60d0-293">Klientu pasūtījumi versijā 8.1.3 izmanto tādu pašu plūsmu, kāda tika izmantota pirms visu kanālu marķieru piešķiršanas līdzekļa ieviešanas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="a60d0-294">Kartes, kas nevar izsniegt periodiskus karšu marķierus</span><span class="sxs-lookup"><span data-stu-id="a60d0-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="a60d0-295">Dažas kartes nevar izmantot visu kanālu maksājumiem, jo tās neatbalsta periodisku karšu marķieru izsniegšanu.</span><span class="sxs-lookup"><span data-stu-id="a60d0-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="a60d0-296">Kad pārdošanas punktā (POS) tiek izveidots kāds pasūtījums, kurā depozīts ir samaksāts, izmantojot karti, kas neatbalsta periodiskus karšu marķierus, tiek izmantota iepriekšējā karšu marķieru piešķiršanas plūsma.</span><span class="sxs-lookup"><span data-stu-id="a60d0-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="a60d0-297">Tādēļ klientam, kurš vēlas veikt maksājumu, kas tiks izmantots turpmākai pasūtījuma izpildīšanai, ir jānorāda otra karte.</span><span class="sxs-lookup"><span data-stu-id="a60d0-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="a60d0-298">Ja otrā karte neatbalsta periodiskos karšu marķierus, marķieru piešķiršanas darbība tiek noraidīta un kasieris tiek aicināts lūgt klientam uzrādīt citu karti.</span><span class="sxs-lookup"><span data-stu-id="a60d0-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="a60d0-299">Citas kartes lietošana</span><span class="sxs-lookup"><span data-stu-id="a60d0-299">Using a different card</span></span>

<span data-ttu-id="a60d0-300">Klientam, kurš ierodas veikalā pasūtījuma saņemšanai, ir iespēja izmantot citu karti.</span><span class="sxs-lookup"><span data-stu-id="a60d0-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="a60d0-301">Kad pasūtījuma saņemšanas laikā kasierim tiek parādīta uzvedne **Izmantot pieejamu maksāšanas metodi**, kasieris var pavaicāt, vai klients vēlas izmantot to pašu karti.</span><span class="sxs-lookup"><span data-stu-id="a60d0-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="a60d0-302">Ja klients ir pazaudējis karti, kura tika izmantota pasūtījuma izveidošanai, un vēlas maksāt par pasūtījumu, izmantojot citu karti, kasieris var atlasīt **Izmantot citu maksāšanas metodi**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="a60d0-303">Ja klients vēlāk atgriežas, lai saņemtu citus vienumus tam pašam pasūtījumam, un ja sākotnējā kartes autorizācija joprojām ir derīga, kasieris atkal var vaicāt, vai klients vēlas izmantot šo karti.</span><span class="sxs-lookup"><span data-stu-id="a60d0-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="a60d0-304">Nederīgas autorizācijas</span><span class="sxs-lookup"><span data-stu-id="a60d0-304">Invalid authorizations</span></span>

<span data-ttu-id="a60d0-305">Ja pasūtījuma izveidošanai izmantotā karte vairs nav derīga, kad preces tiek atlasītas saņemšanai, maksājuma iegūšanas pieprasījums ir nesekmīgs.</span><span class="sxs-lookup"><span data-stu-id="a60d0-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="a60d0-306">Tādā gadījumā POS maksājumu savienotājs mēģina izveidot jaunu autorizāciju un iegūšanu, izmantojot to pašu kartes informāciju.</span><span class="sxs-lookup"><span data-stu-id="a60d0-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="a60d0-307">Ja jaunā autorizācija vai iegūšana ir nesekmīga, kasieris tiek informēts, ka maksājumu nevarēja apstrādāt.</span><span class="sxs-lookup"><span data-stu-id="a60d0-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="a60d0-308">Tādā gadījumā kasierim no klienta ir jāiegūst jauns maksājums.</span><span class="sxs-lookup"><span data-stu-id="a60d0-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="a60d0-309">Vairāki pieejamie maksājumi</span><span class="sxs-lookup"><span data-stu-id="a60d0-309">Multiple available payments</span></span>

<span data-ttu-id="a60d0-310">Kad tiek saņemts pasūtījums ar vairākiem norēķiniem un vairākām rindām, kasierim vispirms tiek parādīta uzvedne **Izmantot pieejamu maksāšanas metodi**.</span><span class="sxs-lookup"><span data-stu-id="a60d0-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="a60d0-311">Ja pastāv vairākas kartes, kad kasieris atlasa **Izmantot pieejamu maksāšanas metodi**, tiek iegūtas esošās karšu norēķinu rindas, līdz bilance par pašlaik saņemtajām precēm ir izpildīta.</span><span class="sxs-lookup"><span data-stu-id="a60d0-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="a60d0-312">Kasierim nav iespējas atlasīt karti, kas ir jāizmanto precēm, kuras tiek saņemtas.</span><span class="sxs-lookup"><span data-stu-id="a60d0-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="a60d0-313">Saistītās tēmas</span><span class="sxs-lookup"><span data-stu-id="a60d0-313">Related topics</span></span>

- [<span data-ttu-id="a60d0-314">Bieži uzdotie jautājumi par maksājumiem</span><span class="sxs-lookup"><span data-stu-id="a60d0-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="a60d0-315">Dynamics 365 maksājumu savienotājs pakalpojumam Adyen</span><span class="sxs-lookup"><span data-stu-id="a60d0-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="a60d0-316">BOPIS konfigurācija Dynamics 365 Commerce novērtējuma videi</span><span class="sxs-lookup"><span data-stu-id="a60d0-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

