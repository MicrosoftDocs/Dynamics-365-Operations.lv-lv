---
title: Noliktavas pārvaldības rīcībā esošo ierakstu tīrīšanas darbs
description: Šajā tēmā ir aprakstīts rīcībā esošo ierakstu tīrīšanas darbs, kas palīdz uzlabot sistēmas veiktspēju, identificējot un dzēšot saistītus, bet nevajadzīgus ierakstus.
author: perlynne
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 4dd3bb9dc580e715b6945da1f94cf27e601c549e
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 04/01/2021
ms.locfileid: "5808730"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="f9e7d-103">Noliktavas pārvaldības rīcībā esošo ierakstu tīrīšanas darbs</span><span class="sxs-lookup"><span data-stu-id="f9e7d-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="f9e7d-104">Vaicājumu, kas tiek izmantoti rīcībā esošo krājumu aprēķināšanai, veiktspēju ietekmē to ierakstu skaits, kas atrodas iesaistītajās tabulās.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="f9e7d-105">Viens no veiktspējas uzlabošanas veidiem ir samazināt to ierakstu skaitu, kuri datu bāzei ir jāņem vērā.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="f9e7d-106">Šajā tēmā ir aprakstīts rīcībā esošo ierakstu tīrīšanas darbs, kas izdzēš nevajadzīgus ierakstus InventSum un WHSInventReserve tabulās.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="f9e7d-107">Šajās tabulas tiek glabāta rīcībā esošā informācija par krājumiem, kas ir iespējoti noliktavas pārvaldības apstrādei.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="f9e7d-108">(Šie krājumi tiek saukti par WHS krājumiem.) Šo ierakstu dzēšana var būtiski uzlabot rīcībā esošo aprēķinu veiktspēju.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="f9e7d-109">Kas ir tīrīšanas darbs</span><span class="sxs-lookup"><span data-stu-id="f9e7d-109">What the cleanup job does</span></span>

<span data-ttu-id="f9e7d-110">Rīcībā esošo ierakstu tīrīšanas darbs dzēš visus ierakstus WHSInventReserve un InventSum tabulās, ja visas lauka vērtības ir *0* (nulle).</span><span class="sxs-lookup"><span data-stu-id="f9e7d-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="f9e7d-111">Šos ierakstus var dzēst, jo tie neveicina rīcībā esošo informāciju.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="f9e7d-112">Darbs dzēš tikai tos ierakstus, kas ir zem līmeņa **Novietojums**.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="f9e7d-113">Ja ir atļauti negatīvi fiziskie krājumi, tīrīšanas darbs, iespējams, nevarēs izdzēst visus atbilstošos ierakstus.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="f9e7d-114">Šī ierobežojuma iemesls ir tas, ka darbam ir jānodrošina īpašs scenārijs, kurā unikālajai noliktavas vienībai ir vairāki sērijas numuri, un viens no šiem sērijas numuriem ir kļuvis negatīvs.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="f9e7d-115">Piemēram, sistēmai būs nulle rīcībā esošajā unikālās noliktavas vienības līmenī, ja unikālajai noliktavas vienībai ir 1. sērijas numurs + 1 gab. un 2. sērijas numurs – 1 gab.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="f9e7d-116">Šajā īpašajā scenārijā darbs veic plašuma dzēšanu, vispirms mēģinot izdzēst no zemākiem līmeņiem.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="f9e7d-117">Tīrīšanas darba ieplānošana un konfigurēšana</span><span class="sxs-lookup"><span data-stu-id="f9e7d-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="f9e7d-118">Rīcībā esošo ierakstu tīrīšanas darbs ir pieejams **Krājumu vadība \> Periodiskie uzdevumi \> Tīrīt \> Noliktavas pārvaldības rīcībā esošo ierakstu tīrīšana**.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="f9e7d-119">Lietojiet standarta darba iestatījumus, lai kontrolētu darba izpildes jomu un grafiku.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="f9e7d-120">Turklāt tiek nodrošināti tālāk minētie iestatījumi.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="f9e7d-121">**Dzēst, ja nav atjaunināts ... dienas** — ievadiet minimālo dienu skaitu, cik ilgi darbam jāgaida, pirms tas dzēš rīcībā esošo ierakstu, kas ir samazinājies līdz nulles daudzumam.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="f9e7d-122">Izmantojiet šo iestatījumu, lai samazinātu to rīcībā esošo ierakstu dzēšanas risku, kas joprojām tiek lietoti.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="f9e7d-123">Ja vēlaties tīrīšanu veikt pēc iespējas drīzāk, ievadiet *0* (nulle) vai atstājiet lauku tukšu.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="f9e7d-124">**Maksimālais izpildes laiks (stundas)** — ievadiet tīrīšanas darba maksimālo izpildes laiku stundās.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="f9e7d-125">Ja darbs nav pabeigts pirms šī laika beigām, tas saglabās līdz šim paveikto darbu un pēc tam tiks aizvērts.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="f9e7d-126">Šī iespēja ir īpaši svarīga implementācijām, kurās ir augsta krājumu izmantošana.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="f9e7d-127">Šādos gadījumos darbs ir jāplāno, lai tas darbotos laikā, kad sistēmas noslodze ir iespējami mazāka.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="f9e7d-128">Ja vēlaties, lai pakešuzdevums turpinātu darboties, līdz tas ir pabeigts, ievadiet *0* (nulle) vai atstājiet lauku tukšu.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="f9e7d-129">Šis iestatījums ir pieejams tikai tad, ja saistītais līdzeklis [sistēmā ir ieslēgts](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="f9e7d-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="f9e7d-130">Lai gan darbu varat palaist regulāro darba stundu laikā, iesakām to palaist ārpus darba laika.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="f9e7d-131">Tādējādi jūs palīdzat novērst konfliktus, kas var rasties, ja lietotājs strādā ar ierakstu, kas tiek arī tīrīts.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="f9e7d-132">Ja darbs mēģina izdzēst ierakstu krājumam laikā, kad šo ierakstu izmanto cits lietotājs, tīrīšanas darbam vai lietotājam rodas bezizejas kļūda.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="f9e7d-133">Kad darbs tiek palaists, tā izpildes lielums ir 100.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="f9e7d-134">Citiem vārdiem sakot, tas mēģinās izpildīt vienu reizi katrām 100 dzēšanām.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="f9e7d-135">Tomēr, tā kā dažas dzēšanas ir balstītas uz kopu, var būt scenāriji, kuros vienā darbībā var dzēst vairāk par 100 ierakstiem.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="f9e7d-136">Tāpēc dažreiz var rasties bloķēšanas eskalācijas.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="f9e7d-137">Iespējamā lietotāja ietekme</span><span class="sxs-lookup"><span data-stu-id="f9e7d-137">Possible user impact</span></span>

<span data-ttu-id="f9e7d-138">Lietotāji var tikt ietekmēti, ja rīcībā esošo ierakstu tīrīšanas darbs dzēš visus ierakstus noteiktā līmenī (piemēram, unikālās noliktavas vienības līmenī).</span><span class="sxs-lookup"><span data-stu-id="f9e7d-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="f9e7d-139">Šādā gadījumā funkcionalitāte, lai redzētu, ka krājumi iepriekš bijuši pieejami unikālajā noliktavas vienībā, iespējams, nedarbosies kā paredzēts, jo attiecīgie rīcībā esošie ieraksti vairs nav pieejami.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-139">In this case, the functionality for seeing that inventory was previously available on-hand at a license plate might not work as expected because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="f9e7d-140">Ar to var saskarties šādās situācijās:</span><span class="sxs-lookup"><span data-stu-id="f9e7d-140">This can, for example, be experienced in the following situations:</span></span>

- <span data-ttu-id="f9e7d-141">**Rīcībā esošo krājumu sarakstā**, kad lietotājs atceļ nosacījumu **Daudzums \<\> 0** atlasa nosacījumu **Slēgtas darbības** **Dimensiju rādīšanas** iestatījumos.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-141">On the **On-hand list**, when the user deselects the condition **Quantity \<\> 0** or selects the condition **Closed transactions** in the **Dimensions display** settings.</span></span>
- <span data-ttu-id="f9e7d-142">**Fizisko krājumu pēc krājumu dimensijas** pārskatā par pagājušajiem periodiem, kad lietotājs iestata parametru **No datuma**.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-142">In a **Physical inventory by inventory dimension** report for past periods, when the user sets the **As of date** parameter.</span></span>

<span data-ttu-id="f9e7d-143">Tomēr veiktspējas uzlabojums, ko nodrošina tīrīšanas darbs, vajadzētu kompensēt šos mazos funkcionalitātes zaudējumus.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-143">However, the performance improvement that the cleanup job provides should make up for these small losses in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="f9e7d-144">Maksimālā izpildes laika iestatījuma iespējošana</span><span class="sxs-lookup"><span data-stu-id="f9e7d-144">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="f9e7d-145">Pēc noklusējuma iestatījums **Maksimālais izpildes laiks** nav pieejams.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-145">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="f9e7d-146">Ja vēlaties to lietot, ir jāizmanto [līdzekļu pārvaldība](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), lai ieslēgtu saistīto līdzekli jūsu sistēmā.</span><span class="sxs-lookup"><span data-stu-id="f9e7d-146">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="f9e7d-147">Darbvietā **Līdzekļu pārvaldība** šis līdzeklis ir uzskaitīts šādi:</span><span class="sxs-lookup"><span data-stu-id="f9e7d-147">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="f9e7d-148">**Modulis:** *Noliktavas pārvaldība*</span><span class="sxs-lookup"><span data-stu-id="f9e7d-148">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="f9e7d-149">**Līdzekļa nosaukums:** *Maksimālais izpildes laiks noliktavas pārvaldības rīcībā esošo ierakstu tīrīšanas darbam*</span><span class="sxs-lookup"><span data-stu-id="f9e7d-149">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]